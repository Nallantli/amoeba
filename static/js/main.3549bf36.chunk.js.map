{"version":3,"sources":["reportWebVitals.ts","ThemeSelector.tsx","Menu.tsx","Space.tsx","Chunk.tsx","utils.tsx","GameState.tsx","Board.tsx","AI.tsx","ais/utils.tsx","ais/Elk.tsx","ais/ElkAtt.tsx","ais/ElkDef.tsx","ais/Fuzzy.tsx","ais/ElkSurf.tsx","ais/ElkTimid.tsx","App.tsx","index.tsx","assets/CircleIcon.tsx","assets/CrossIcon.tsx","assets/DiamondIcon.tsx","assets/SquareIcon.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","DefaultTheme","React","lazy","Win98Theme","ThemeSelector","props","Suspense","fallback","theme","children","Menu","state","tab","this","winLength","limit","delay","AINames","iconConfig","removeItem","index","newAINames","splice","setState","changeAI","value","canDelete","length","id","className","onClick","type","defaultValue","onChange","e","parseInt","target","map","AIName","createElement","playerIcons","color","playerColors","selected","PlayerItem","url","i","window","location","assign","Component","Space","x","y","win","canPlayerMove","view","spaceSize","style","position","width","height","left","top","Chunk","chunkData","posX","posY","chunkX","chunkY","selectSquare","col","cell","detail","flatten","d","fib","n","horizontalCount","gameState","v","ps","getValue","push","verticalCount","diagonalUp","diagonalDown","chunk","Math","floor","undefined","calculateLimitScore","playerCount","placements","matches","forEach","placement","flag","removes","p","a","b","j","sharePoint","old","playerScores","m","filter","score","checkWin","isLimited","moveLimit","check","squares","s","document","getElementById","classList","add","addChunk","turn","generateBorderChunks","Limit","ScoreScreen","Board","boardRef","bind","postMove","handleScroll","handleTouchStart","handleTouchMove","handleTouchEnd","handleZoom","handleKeyDown","handleKeyUp","getPlayerScores","createRef","offsetX","offsetY","xLow","xHigh","yLow","yHigh","isTouching","touchStart","touchOffset","shiftScroll","ctrlScroll","newSpaceSize","max","min","preventDefault","exp","deltaY","deltaX","evt","originalEvent","touch","touches","changedTouches","pageX","pageY","pow","click","key","addEventListener","passive","current","doLocalTurn","winner","sort","element","shadow","getComputedStyle","boxShadow","join","broadcast","canMove","background","reload","ref","marginTop","marginLeft","Object","values","AI","icon","pCount","_gameState","_playerScores","Error","countLine","dx","dy","l","nx","ny","nx2","ny2","Elk","highAtt","highDef","heatMap","h","o","att","def","Array","fill","_","maxDef","maxAtt","attMap","defMap","random","ElkAtt","ElkDef","Fuzzy","ElkSurf","AIs","opponentScores","AIScore","modif","console","log","ElkTimid","turnDelay","doTurn","setTimeout","dispatchEvent","CustomEvent","App","gs","callback","params","URLSearchParams","search","openGame","get","data-name","xmlns","viewBox","points","transform","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3549bf36.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\n\r\n/**\r\n * The theme components only imports it's theme CSS-file. These components are lazy\r\n * loaded, to enable \"code splitting\" (in order to avoid the themes being bundled together)\r\n */\r\nconst DefaultTheme = React.lazy(() => import('./styles/App'));\r\nconst Win98Theme = React.lazy(() => import('./styles/Win98'));\r\n\r\nconst ThemeSelector = (props: { theme: string; children: any; }) => (\r\n  <>\r\n    {/* Conditionally render theme, based on the current client context */}\r\n    <React.Suspense fallback={() => <div />}>\r\n      {props.theme === 'default' && <DefaultTheme />}\r\n      {props.theme === 'win98' && <Win98Theme />}\r\n    </React.Suspense>\r\n    {/* Render children immediately! */}\r\n    {props.children}\r\n  </>\r\n);\r\n\r\nexport default ThemeSelector;\r\n","import React from \"react\";\r\nimport { GameProps } from \"./GameProps\";\r\nimport { IconConfig } from \"./IconConfig\";\r\n\r\ntype PlayerItemProps = {\r\n\tAIName: string,\r\n\tindex: number,\r\n\ticonConfig: IconConfig,\r\n\tremoveItem: Function,\r\n\tchangeAI: Function,\r\n\tcanDelete: boolean\r\n};\r\n\r\nfunction PlayerItem(props: PlayerItemProps) {\r\n\tconst { AIName, index, iconConfig, removeItem, changeAI, canDelete } = props;\r\n\treturn (\r\n\t\t<div className=\"menu-playerItem\">\r\n\t\t\t<div className=\"menu-playerItem-icon\">\r\n\t\t\t\t{React.createElement(iconConfig.playerIcons[index], { color: iconConfig.playerColors[index] })}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"menu-playerItem-body\">\r\n\t\t\t\t<div className=\"menu-playerItem-AISelect\">\r\n\t\t\t\t\t<span>Type:</span>\r\n\t\t\t\t\t<select id={`p${index + 1}`} onChange={(e) => changeAI(index, e.target.value)}>\r\n\t\t\t\t\t\t<option selected={AIName === 'player' ? true : false} value=\"player\">No AI</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'fuzzy' ? true : false} value=\"fuzzy\">fuzzy</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elk' ? true : false} value=\"elk\">elk</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elkatt' ? true : false} value=\"elkatt\">elkatt</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elkdef' ? true : false} value=\"elkdef\">elkdef</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elksurf' ? true : false} value=\"elksurf\">elksurf</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elktimid' ? true : false} value=\"elktimid\">elktimid</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{canDelete && <button className=\"menu-playerItem-remove\" onClick={() => removeItem(index)}>X</button>}\r\n\t\t</div>)\r\n}\r\n\r\ninterface MenuState extends GameProps {\r\n\ttab: string;\r\n};\r\n\r\nexport class Menu extends React.Component<GameProps, MenuState> {\r\n\tconstructor(props: GameProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t...props,\r\n\t\t\ttab: 'regular'\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\tconst { winLength, limit, delay, AINames, iconConfig, tab } = this.state\r\n\t\tconst removeItem = (index: number) => {\r\n\t\t\tlet newAINames = [...this.state.AINames];\r\n\t\t\tnewAINames.splice(index, 1);\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tAINames: newAINames\r\n\t\t\t})\r\n\t\t};\r\n\t\tconst playGame = () => {\r\n\t\t\tlet url = `win=${winLength}&count=${AINames.length}&delay=${delay}`;\r\n\t\t\tif (tab === \"limit\") {\r\n\t\t\t\turl += `&limit=${limit}`;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < AINames.length; i++) {\r\n\t\t\t\tif (AINames[i] !== 'player') {\r\n\t\t\t\t\turl += `&p${i + 1}=${AINames[i]}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twindow.location.assign(`https://nallantli.github.io/amoeba/?game=1&${url}`);\r\n\t\t};\r\n\t\tconst changeAI = (index: number, value: string) => {\r\n\t\t\tlet newAINames = [...this.state.AINames];\r\n\t\t\tnewAINames[index] = value;\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tAINames: newAINames\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst canDelete = (AINames.length > 1);\r\n\t\treturn (\r\n\t\t\t<div id=\"menu\">\r\n\t\t\t\t<div id=\"tabs\">\r\n\t\t\t\t\t<button className={`tablinks-${tab === \"regular\" ? \"active\" : \"inactive\"}`} onClick={() => this.setState({ ...this.state, tab: \"regular\" })}>Regular Mode</button>\r\n\t\t\t\t\t<button className={`tablinks-${tab === \"limit\" ? \"active\" : \"inactive\"}`} onClick={() => this.setState({ ...this.state, tab: \"limit\" })}>Limit Mode</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id={`menu-options-${tab === \"regular\" ? \"active\" : \"inactive\"}`}>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id={`menu-options-${tab === \"limit\" ? \"active\" : \"inactive\"}`}>\r\n\t\t\t\t\t<div id=\"menu-limit\">\r\n\t\t\t\t\t\t<span>Maximum Amount of Rounds:</span>\r\n\t\t\t\t\t\t<input id=\"input-limit\" type=\"text\" defaultValue={limit} onChange={(e) => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\tlimit: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"menu-options\">\r\n\t\t\t\t\t<div id=\"menu-winLength\">\r\n\t\t\t\t\t\t<span>Length to Win or (Limit Mode) Gain Score:</span>\r\n\t\t\t\t\t\t<input id=\"input-winLength\" type=\"text\" defaultValue={winLength} onChange={(e) => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\twinLength: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"menu-delay\">\r\n\t\t\t\t\t\t<span>Millisecond Delay Between Moves:</span>\r\n\t\t\t\t\t\t<input id=\"input-delay\" type=\"text\" defaultValue={delay} onChange={(e) => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\tdelay: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"menu-players\">\r\n\t\t\t\t\t{AINames.map((AIName, index) => PlayerItem({\r\n\t\t\t\t\t\tAIName,\r\n\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\ticonConfig,\r\n\t\t\t\t\t\tremoveItem,\r\n\t\t\t\t\t\tchangeAI,\r\n\t\t\t\t\t\tcanDelete\r\n\t\t\t\t\t}))}\r\n\t\t\t\t</div>\r\n\t\t\t\t{AINames.length < 4 && <button id=\"menu-addPlayer\" onClick={() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tAINames: [\r\n\t\t\t\t\t\t\t...AINames,\r\n\t\t\t\t\t\t\t\"player\"\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t}}>Add Player</button>}\r\n\t\t\t\t<button id=\"play-game\" onClick={playGame}>\r\n\t\t\t\t\tPlay!\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React from \"react\";\r\nimport { IconConfig } from \"./IconConfig\";\r\n\r\ntype SpaceProps = {\r\n\tx: number;\r\n\ty: number;\r\n\tid: string;\r\n\tvalue: number;\r\n\twin: boolean;\r\n\tcanPlayerMove: boolean;\r\n\tonClick: (e: any) => void;\r\n\tview: { spaceSize: number };\r\n\ticonConfig: IconConfig;\r\n};\r\n\r\nexport const Space = (props: SpaceProps) => {\r\n\tconst { x, y, id, value, win, canPlayerMove, onClick, view, iconConfig } = props;\r\n\tconst { spaceSize } = view;\r\n\treturn (<button\r\n\t\tid={id}\r\n\t\tonClick={value === 0 && !win && canPlayerMove ? onClick : () => { }}\r\n\t\tclassName=\"space\"\r\n\t\tstyle={{\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: `${spaceSize}px`,\r\n\t\t\theight: `${spaceSize}px`,\r\n\t\t\tleft: `${x * spaceSize}px`,\r\n\t\t\ttop: `${y * spaceSize}px`\r\n\t\t}}\r\n\t>\r\n\t\t{value > 0 && React.createElement(iconConfig.playerIcons[value - 1], { color: iconConfig.playerColors[value - 1] })}\r\n\t</button>);\r\n}","import { IconConfig } from \"./IconConfig\";\r\nimport { Space } from \"./Space\";\r\n\r\nexport const chunkSize = 3;\r\n\r\nexport const Chunk = (props: {\r\n\tchunkX: number;\r\n\tchunkY: number;\r\n\tselectSquare: (e: any) => void;\r\n\tchunkData: number[][];\r\n\tposX: number;\r\n\tposY: number;\r\n\twin: boolean;\r\n\tcanPlayerMove: boolean;\r\n\tview: { spaceSize: number; };\r\n\ticonConfig: IconConfig;\r\n}) => {\r\n\tconst { chunkData, posX, posY, chunkX, chunkY, win, canPlayerMove, view, selectSquare, iconConfig } = props;\r\n\tconst { spaceSize } = view;\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"chunk\"\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\twidth: `${chunkSize * spaceSize}px`,\r\n\t\t\t\theight: `${chunkSize * spaceSize}px`,\r\n\t\t\t\tleft: `${posX * chunkSize * spaceSize}px`,\r\n\t\t\t\ttop: `${posY * chunkSize * spaceSize}px`\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{chunkData.map((col, x) => {\r\n\t\t\t\treturn col.map((cell, y) =>\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tkey={`${x + chunkX * chunkSize}_${y + chunkY * chunkSize}`}\r\n\t\t\t\t\t\tid={`${x + chunkX * chunkSize}_${y + chunkY * chunkSize}`}\r\n\t\t\t\t\t\tvalue={cell}\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tonClick={() => selectSquare({ detail: { x: chunkX * chunkSize + x, y: chunkY * chunkSize + y } })}\r\n\t\t\t\t\t\twin={win}\r\n\t\t\t\t\t\tcanPlayerMove={canPlayerMove}\r\n\t\t\t\t\t\tview={view}\r\n\t\t\t\t\t\ticonConfig={iconConfig}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}","export function flatten(x: number, d: number): number {\r\n\twhile (x < 0)\r\n\t\tx += d;\r\n\treturn x % d;\r\n}\r\n\r\n/* carter code */\r\nexport function fib(n: number): number {\r\n\tif (n === 1 || n === 0)\r\n\t\treturn n;\r\n\telse\r\n\t\treturn fib(n - 2) + fib(n - 1);\r\n}","import { AI } from \"./AI\";\r\nimport { chunkSize } from \"./Chunk\";\r\nimport { fib, flatten } from \"./utils\";\r\n\r\nexport type GameState = {\r\n\tmap: { [key: string]: { x: number, y: number, chunkData: number[][] } };\r\n\tplacements: { x: number, y: number, v: number }[];\r\n\tplayerCount: number;\r\n\twinLength: number;\r\n\tmoveLimit: number;\r\n\tisLimited: boolean;\r\n\tturn: number;\r\n\tdelay: number;\r\n\tAIs: (AI | undefined)[];\r\n};\r\n\r\nfunction horizontalCount(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 0 };\r\n}\r\n\r\nfunction verticalCount(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty++;\r\n\t}\r\n\treturn { ps, type: 1 };\r\n}\r\n\r\nfunction diagonalUp(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty++;\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 2 };\r\n}\r\n\r\nfunction diagonalDown(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty--;\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 3 };\r\n}\r\n\r\nexport function getValue(gameState: GameState, x: number, y: number) {\r\n\tconst { map } = gameState;\r\n\tconst chunk = map[Math.floor(x / chunkSize) + '_' + Math.floor(y / chunkSize)];\r\n\tif (chunk === undefined) {\r\n\t\treturn 0;\r\n\t}\r\n\treturn chunk.chunkData[flatten(x, chunkSize)][flatten(y, chunkSize)];\r\n}\r\n\r\nfunction sharePoint(a: { x: number, y: number }[], b: { x: number, y: number }[]) {\r\n\tfor (let i = 0; i < a.length; i++) {\r\n\t\tfor (let j = 0; j < b.length; j++) {\r\n\t\t\tif (a[i].x === b[j].x && a[i].y === b[j].y)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport function calculateLimitScore(gameState: GameState) {\r\n\tconst { playerCount, winLength, placements } = gameState;\r\n\tlet matches: { type: number, ps: { x: number, y: number }[], old?: boolean }[][] = [];\r\n\tfor (let i = 0; i < playerCount; i++) {\r\n\t\tmatches.push([]);\r\n\t}\r\n\tplacements.forEach((placement: { x: number, y: number, v: number }) => {\r\n\t\t[\r\n\t\t\thorizontalCount(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tverticalCount(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tdiagonalUp(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tdiagonalDown(gameState, placement.x, placement.y, placement.v)\r\n\t\t].forEach(e => {\r\n\t\t\tif (e.ps.length < winLength) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet flag = false;\r\n\t\t\tlet removes: number[] = [];\r\n\t\t\tmatches[placement.v - 1].forEach((p: { type: number, ps: { x: number, y: number }[] }, i: number) => {\r\n\t\t\t\tif (p.type === e.type && sharePoint(p.ps, e.ps)) {\r\n\t\t\t\t\tif (p.ps.length < e.ps.length) {\r\n\t\t\t\t\t\tremoves.push(i);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tremoves.forEach(i => matches[placement.v - 1][i].old = true);\r\n\t\t\tif (!flag) {\r\n\t\t\t\tmatches[placement.v - 1].push(e);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tlet playerScores: number[] = [];\r\n\tmatches.map(m => m.filter(e => e.old === undefined));\r\n\tmatches.forEach(e => {\r\n\t\tlet score = 0;\r\n\t\te.forEach(p => {\r\n\t\t\tscore += fib(p.ps.length - winLength + 2);\r\n\t\t});\r\n\t\tplayerScores.push(score);\r\n\t});\r\n\treturn playerScores;\r\n}\r\n\r\nexport function checkWin(gameState: GameState): boolean {\r\n\tif (gameState.placements.length === 0) {\r\n\t\treturn false;\r\n\t}\r\n\tconst { x, y } = gameState.placements[gameState.placements.length - 1];\r\n\tconst { winLength, isLimited, moveLimit } = gameState;\r\n\tif (isLimited) {\r\n\t\tif (moveLimit === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else {\r\n\t\tconst check = getValue(gameState, x, y);\r\n\t\tif (check === 0)\r\n\t\t\treturn false;\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + y);\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tconst s = getValue(gameState, x, y - i + j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push(x + \"_\" + (y - i + j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y - i + j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + (y - i + j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y + i - j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + (y + i - j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport function addChunk(gameState: GameState, x: number, y: number): GameState {\r\n\tconst { map } = gameState;\r\n\tif (map[x + '_' + y] !== undefined) {\r\n\t\treturn gameState;\r\n\t}\r\n\tlet chunkData: number[][] = [];\r\n\tfor (let i = 0; i < chunkSize; i++) {\r\n\t\tchunkData[i] = [];\r\n\t\tfor (let j = 0; j < chunkSize; j++) {\r\n\t\t\tchunkData[i][j] = 0;\r\n\t\t}\r\n\t}\r\n\treturn gameState = {\r\n\t\t...gameState,\r\n\t\tmap: {\r\n\t\t\t...map,\r\n\t\t\t[`${x}_${y}`]: {\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\tchunkData\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction generateBorderChunks(gameState: GameState, chunkX: number, chunkY: number): GameState {\r\n\tfor (let i = chunkX - 1; i <= chunkX + 1; i++) {\r\n\t\tfor (let j = chunkY - 1; j <= chunkY + 1; j++) {\r\n\t\t\tgameState = { ...gameState, ...addChunk(gameState, i, j) };\r\n\t\t}\r\n\t}\r\n\treturn gameState;\r\n}\r\n\r\nexport function selectSquare(gameState: GameState, x: number, y: number): GameState {\r\n\tconst { turn, moveLimit, placements, playerCount } = gameState;\r\n\tconst chunkX = Math.floor(x / chunkSize);\r\n\tconst chunkY = Math.floor(y / chunkSize);\r\n\tconst v = turn + 1;\r\n\tconst chunk = gameState.map[chunkX + '_' + chunkY];\r\n\tif (chunk === undefined) {\r\n\t\treturn selectSquare(\r\n\t\t\taddChunk(\r\n\t\t\t\tgameState,\r\n\t\t\t\tchunkX,\r\n\t\t\t\tchunkY),\r\n\t\t\tx,\r\n\t\t\ty);\r\n\t}\r\n\tchunk.chunkData[flatten(x, chunkSize)][flatten(y, chunkSize)] = v;\r\n\tgameState = generateBorderChunks(gameState, chunkX, chunkY);\r\n\treturn gameState = {\r\n\t\t...gameState,\r\n\t\tmap: {\r\n\t\t\t...gameState.map,\r\n\t\t\t[chunkX + '_' + chunkY]: chunk\r\n\t\t},\r\n\t\tplacements: [...placements, { x, y, v }],\r\n\t\tturn: (turn + 1) % playerCount,\r\n\t\tmoveLimit: moveLimit - (turn === playerCount - 1 ? 1 : 0)\r\n\t};\r\n}","import React from 'react';\r\nimport { Chunk, chunkSize } from './Chunk';\r\nimport { calculateLimitScore, checkWin, GameState, getValue, selectSquare } from './GameState';\r\nimport { IconConfig } from './IconConfig';\r\nimport { flatten } from './utils';\r\n\r\nconst Limit = (props: { moveLimit: number }) => {\r\n\treturn (<div id=\"limit-dialog\">Turns Left: {props.moveLimit}</div>);\r\n}\r\n\r\nconst ScoreScreen = (props: { playerScores: number[], iconConfig: IconConfig }) => {\r\n\tconst { playerScores, iconConfig } = props;\r\n\treturn (\r\n\t\t<div id=\"score-dialog\">\r\n\t\t\t<table>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{playerScores.map((score, i) => <tr key={i}><td style={{ width: \"40px\" }}>{React.createElement(iconConfig.playerIcons[i], { color: iconConfig.playerColors[i] })}</td><td>{score}</td></tr>)}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\ntype BoardProps = {\r\n\tgameState: GameState;\r\n\ticonConfig: IconConfig;\r\n\tbroadcast: (gameState: GameState, callback: (gameState: GameState) => void) => void;\r\n\tdoLocalTurn: (gameState: GameState, boardRef: any, turnDelay: number, playerScores: number[]) => void;\r\n\tcanMove: boolean;\r\n};\r\n\r\ntype BoardState = {\r\n\tview: {\r\n\t\toffsetX: number;\r\n\t\toffsetY: number;\r\n\t\tspaceSize: number;\r\n\t};\r\n\txLow: number;\r\n\txHigh: number;\r\n\tyLow: number;\r\n\tyHigh: number;\r\n\tisTouching: boolean;\r\n\ttouchStart: { x: number, y: number };\r\n\ttouchOffset: { x: number, y: number };\r\n\tshiftScroll: boolean;\r\n\tctrlScroll: boolean;\r\n};\r\n\r\nexport class Board extends React.Component<BoardProps, BoardState> {\r\n\tboardRef: React.RefObject<HTMLDivElement>;\r\n\tconstructor(props: BoardProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.selectSquare = this.selectSquare.bind(this);\r\n\t\tthis.postMove = this.postMove.bind(this);\r\n\t\tthis.handleScroll = this.handleScroll.bind(this);\r\n\t\tthis.handleTouchStart = this.handleTouchStart.bind(this);\r\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\r\n\t\tthis.handleTouchEnd = this.handleTouchEnd.bind(this);\r\n\t\tthis.handleZoom = this.handleZoom.bind(this);\r\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\r\n\t\tthis.handleKeyUp = this.handleKeyUp.bind(this);\r\n\t\tthis.getPlayerScores = this.getPlayerScores.bind(this);\r\n\r\n\t\tthis.boardRef = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\tspaceSize: 50\r\n\t\t\t},\r\n\t\t\txLow: 0,\r\n\t\t\txHigh: 0,\r\n\t\t\tyLow: 0,\r\n\t\t\tyHigh: 0,\r\n\t\t\tisTouching: false,\r\n\t\t\ttouchStart: { x: 0, y: 0 },\r\n\t\t\ttouchOffset: { x: 0, y: 0 },\r\n\t\t\tshiftScroll: false,\r\n\t\t\tctrlScroll: false\r\n\t\t}\r\n\t}\r\n\thandleZoom(v: number) {\r\n\t\tconst { offsetX, offsetY, spaceSize } = this.state.view;\r\n\t\tconst newSpaceSize = Math.max(15, Math.min(160, spaceSize * v));\r\n\t\tthis.setState({\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: offsetX * (newSpaceSize / spaceSize),\r\n\t\t\t\toffsetY: offsetY * (newSpaceSize / spaceSize),\r\n\t\t\t\tspaceSize: newSpaceSize\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\thandleScroll(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst { shiftScroll, ctrlScroll } = this.state;\r\n\t\tconst { offsetX, offsetY, spaceSize } = this.state.view;\r\n\t\tif (ctrlScroll) {\r\n\t\t\tthis.handleZoom(Math.exp(e.deltaY / 200));\r\n\t\t} else {\r\n\t\t\tconst deltaX = e.deltaX * 0.25;\r\n\t\t\tconst deltaY = e.deltaY * 0.25;\r\n\t\t\tthis.setState({\r\n\t\t\t\tview: {\r\n\t\t\t\t\toffsetX: offsetX - (shiftScroll ? deltaY : deltaX),\r\n\t\t\t\t\toffsetY: offsetY - (shiftScroll ? deltaX : deltaY),\r\n\t\t\t\t\tspaceSize: spaceSize\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTouchMove(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tthis.setState({\r\n\t\t\ttouchOffset: { x: touch.pageX, y: touch.pageY }\r\n\t\t});\r\n\t}\r\n\thandleTouchStart(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tthis.setState({\r\n\t\t\tisTouching: true,\r\n\t\t\ttouchStart: { x: touch.pageX, y: touch.pageY },\r\n\t\t\ttouchOffset: { x: touch.pageX, y: touch.pageY }\r\n\t\t});\r\n\t}\r\n\thandleTouchEnd(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tconst { view, touchStart, touchOffset } = this.state;\r\n\t\tconst { offsetX, offsetY, spaceSize } = view;\r\n\t\tthis.setState({\r\n\t\t\tisTouching: false,\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: offsetX + (touchOffset.x - touchStart.x),\r\n\t\t\t\toffsetY: offsetY + (touchOffset.y - touchStart.y),\r\n\t\t\t\tspaceSize: spaceSize\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tif (Math.pow(touchStart.x - touch.pageX, 2) + Math.pow(touchStart.y - touch.pageY, 2) < 10) {\r\n\t\t\t\tif (touch.target.click !== undefined) {\r\n\t\t\t\t\ttouch.target.click();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\thandleKeyDown(e: any) {\r\n\t\tswitch (e.key) {\r\n\t\t\tcase 'Shift':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tshiftScroll: true\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Control':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tctrlScroll: true\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\thandleKeyUp(e: any) {\r\n\t\tswitch (e.key) {\r\n\t\t\tcase 'Shift':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tshiftScroll: false\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Control':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tctrlScroll: false\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tgetPlayerScores() {\r\n\t\tconst { gameState, gameState: { isLimited } } = this.props;\r\n\t\treturn isLimited ? calculateLimitScore(gameState) : [];\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('wheel', this.handleScroll, { passive: false });\r\n\t\twindow.addEventListener('touchstart', this.handleTouchStart, { passive: false });\r\n\t\twindow.addEventListener('touchmove', this.handleTouchMove, { passive: false });\r\n\t\twindow.addEventListener('touchend', this.handleTouchEnd, { passive: false });\r\n\t\twindow.addEventListener('touchcancel', this.handleTouchEnd, { passive: false });\r\n\t\twindow.addEventListener('keydown', this.handleKeyDown, { passive: false });\r\n\t\twindow.addEventListener('keyup', this.handleKeyUp, { passive: false });\r\n\t\tthis.boardRef.current?.addEventListener('selectSquare', this.selectSquare);\r\n\t\tthis.props.doLocalTurn(\r\n\t\t\tthis.props.gameState,\r\n\t\t\tthis.boardRef,\r\n\t\t\tthis.props.gameState.delay,\r\n\t\t\tthis.getPlayerScores());\r\n\t}\r\n\tpostMove(gameState: GameState) {\r\n\t\tconst { iconConfig } = this.props;\r\n\t\tconst { isLimited, playerCount, placements, turn } = gameState;\r\n\t\tif (checkWin(gameState)) {\r\n\t\t\tconst winner =\r\n\t\t\t\tflatten(\r\n\t\t\t\t\t(isLimited ?\r\n\t\t\t\t\t\tcalculateLimitScore(gameState).map((e, i) => ({ e, i })).sort((a, b) => b.e - a.e)[0].i\r\n\t\t\t\t\t\t: turn - 1),\r\n\t\t\t\t\tplayerCount\r\n\t\t\t\t);\r\n\t\t\tplacements.forEach(placement => {\r\n\t\t\t\tlet element = document.getElementById(placement.x + \"_\" + placement.y) as HTMLElement;\r\n\t\t\t\telement.classList.add(\"amoeba-square\");\r\n\t\t\t\tlet shadow = [];\r\n\t\t\t\tif (window.getComputedStyle(element).boxShadow !== \"none\") {\r\n\t\t\t\t\tshadow.push(window.getComputedStyle(element).boxShadow);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 0rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y + 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x + 1, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem 0rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y - 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x + 1, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 0rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y + 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x - 1, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem 0rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y - 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x - 1, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\telement.style.boxShadow = shadow.join(\", \");\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.props.doLocalTurn(\r\n\t\t\t\tgameState,\r\n\t\t\t\tthis.boardRef,\r\n\t\t\t\tgameState.delay,\r\n\t\t\t\tthis.getPlayerScores());\r\n\t\t}\r\n\t}\r\n\tselectSquare(e: any) {\r\n\t\tconst { broadcast, gameState } = this.props;\r\n\t\tconst { x, y } = e.detail;\r\n\t\tdocument.getElementById(x + \"_\" + y)?.classList.add(\"space-pressed\");\r\n\t\tbroadcast(selectSquare(gameState, x, y), this.postMove);\r\n\t}\r\n\trender() {\r\n\t\tconst { iconConfig, canMove, gameState,\r\n\t\t\tgameState: { moveLimit, turn, map, isLimited, playerCount } } = this.props;\r\n\t\tconst { view,\r\n\t\t\tview: { offsetX, offsetY, spaceSize },\r\n\t\t\tisTouching, touchOffset, touchStart,\r\n\t\t\txLow, yLow, xHigh, yHigh\r\n\t\t} = this.state;\r\n\t\tconst width = spaceSize * chunkSize * (xHigh - xLow + 1);\r\n\t\tconst height = spaceSize * chunkSize * (yHigh - yLow + 1);\r\n\t\tconst playerScores = this.getPlayerScores();\r\n\t\tconst win = checkWin(gameState);\r\n\t\treturn (\r\n\t\t\t<div id=\"screen\">\r\n\t\t\t\t<div id=\"player-bar\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: (win ?\r\n\t\t\t\t\t\t\ticonConfig.playerColors[flatten((isLimited ?\r\n\t\t\t\t\t\t\t\tplayerScores.map((e, i) => ({ e, i })).sort((a, b) => b.e - a.e)[0].i\r\n\t\t\t\t\t\t\t\t: turn - 1), playerCount)]\r\n\t\t\t\t\t\t\t: iconConfig.playerColors[turn])\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<div id=\"zoom-bar\">\r\n\t\t\t\t\t<button id=\"zoom-in\" onClick={() => this.handleZoom(3 / 2)}>+</button>\r\n\t\t\t\t\t<button id=\"zoom-out\" onClick={() => this.handleZoom(2 / 3)}>-</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{isLimited && <Limit moveLimit={moveLimit} />}\r\n\t\t\t\t{isLimited && <ScoreScreen playerScores={playerScores} iconConfig={iconConfig} />}\r\n\t\t\t\t<button id=\"reset-button\" onClick={() => window.location.reload()}>Reset Game</button>\r\n\t\t\t\t<div className=\"board\" ref={this.boardRef}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"chunk-container\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\twidth: `${width}px`,\r\n\t\t\t\t\t\t\theight: `${height}px`,\r\n\t\t\t\t\t\t\tmarginTop: `${-height / 2 + offsetY + (isTouching ? (touchOffset.y - touchStart.y) : 0)}px`,\r\n\t\t\t\t\t\t\tmarginLeft: `${-width / 2 + offsetX + (isTouching ? (touchOffset.x - touchStart.x) : 0)}px`\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Object.values(map).map(value =>\r\n\t\t\t\t\t\t\t<Chunk\r\n\t\t\t\t\t\t\t\ticonConfig={iconConfig}\r\n\t\t\t\t\t\t\t\tkey={value.x + '_' + value.y}\r\n\t\t\t\t\t\t\t\tposX={value.x - xLow}\r\n\t\t\t\t\t\t\t\tposY={value.y - yLow}\r\n\t\t\t\t\t\t\t\tchunkX={value.x}\r\n\t\t\t\t\t\t\t\tchunkY={value.y}\r\n\t\t\t\t\t\t\t\tchunkData={value.chunkData}\r\n\t\t\t\t\t\t\t\tselectSquare={this.selectSquare}\r\n\t\t\t\t\t\t\t\twin={win}\r\n\t\t\t\t\t\t\t\tcanPlayerMove={canMove}\r\n\t\t\t\t\t\t\t\tview={view}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import { GameState } from \"./GameState\";\r\n\r\nexport class AI {\r\n\twinLength: number;\r\n\ticon: number;\r\n\tpCount: number;\r\n\tconstructor(\r\n\t\twinLength: number,\r\n\t\ticon: number,\r\n\t\tpCount: number\r\n\t) {\r\n\t\tthis.winLength = winLength;\r\n\t\tthis.icon = icon;\r\n\t\tthis.pCount = pCount;\r\n\t}\r\n\tdoTurn(_gameState: GameState, _playerScores: number[]): { x: number, y: number } {\r\n\t\tthrow new Error(\"Method not implemented.\");\r\n\t}\r\n}","import { GameState } from \"../GameState\";\r\n\r\nexport function countLine(gameState: GameState, x: number, y: number, v: number, dx: number, dy: number, getValue: (gameState: GameState, x: number, y: number) => number, winLength: number): number {\r\n\tlet l = 0;\r\n\tlet i = -1;\r\n\twhile (getValue(gameState, x + i * dx, y + i * dy) === v) {\r\n\t\tlet d = 0;\r\n\t\tlet nx = x + i * dx;\r\n\t\tlet ny = y + i * dy;\r\n\t\twhile (getValue(gameState, nx, ny) === v || (nx === x && ny === y)) {\r\n\t\t\td++;\r\n\t\t\tnx += dx;\r\n\t\t\tny += dy;\r\n\t\t}\r\n\t\tif (d < winLength) {\r\n\t\t\tfor (let j = d; j <= winLength; j++) {\r\n\t\t\t\tlet nx2 = x + (i + j) * dx;\r\n\t\t\t\tlet ny2 = y + (i + j) * dy;\r\n\t\t\t\tif (getValue(gameState, nx2, ny2) !== v && getValue(gameState, nx2, ny2) !== 0) {\r\n\t\t\t\t\td = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (d > l) {\r\n\t\t\tl = d;\r\n\t\t}\r\n\t\ti--;\r\n\t}\r\n\treturn l;\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class Elk extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > 0 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class ElkAtt extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > -1 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class ElkDef extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > 1 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class Fuzzy extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\tif (highAtt >= this.winLength) {\r\n\t\t\t\treturn attMap[Math.floor(Math.random() * attMap.length)];\r\n\t\t\t}\r\n\t\t\tif (highDef >= this.winLength) {\r\n\t\t\t\treturn defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t\t}\r\n\t\t\treturn highAtt >= highDef ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\n// Becomes ElkAtt when winning, ElkDef when losing\r\n\r\nexport class ElkSurf extends AI {\r\n\tdoTurn(gameState: GameState, playerScores: number[]) {\r\n\t\tconst { placements, AIs } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\tlet opponentScores = 0;\r\n\t\t\tlet AIScore = 0;\r\n\t\t\tplayerScores.forEach((score, index) => {\r\n\t\t\t\tif (AIs[index] === this) {\r\n\t\t\t\t\tAIScore = score;\r\n\t\t\t\t} else {\r\n\t\t\t\t\topponentScores += score;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst modif = (opponentScores / (this.pCount - 1)) < AIScore ? -1 : 1;\r\n\t\t\tconsole.log(opponentScores / (this.pCount - 1), AIScore, modif);\r\n\t\t\treturn (highAtt - highDef) > modif ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\n// Becomes ElkDef when winning, ElkAtt when losing\r\n\r\nexport class ElkTimid extends AI {\r\n\tdoTurn(gameState: GameState, playerScores: number[]) {\r\n\t\tconst { placements, AIs } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\tlet opponentScores = 0;\r\n\t\t\tlet AIScore = 0;\r\n\t\t\tplayerScores.forEach((score, index) => {\r\n\t\t\t\tif (AIs[index] === this) {\r\n\t\t\t\t\tAIScore = score;\r\n\t\t\t\t} else {\r\n\t\t\t\t\topponentScores += score;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst modif = (opponentScores / (this.pCount - 1)) < AIScore ? 1 : -1;\r\n\t\t\tconsole.log(opponentScores / (this.pCount - 1), AIScore, modif);\r\n\t\t\treturn (highAtt - highDef) > modif ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { Board } from './Board';\nimport { addChunk, GameState } from './GameState';\nimport { AI } from './AI';\nimport { Elk } from './ais/Elk';\nimport { ElkAtt } from './ais/ElkAtt';\nimport { ElkDef } from './ais/ElkDef';\nimport { Fuzzy } from './ais/Fuzzy';\nimport React from 'react';\nimport { GameProps } from './GameProps';\nimport { ElkSurf } from './ais/ElkSurf';\nimport { ElkTimid } from './ais/ElkTimid';\n\n// const params = new URLSearchParams(window.location.search);\n\nfunction doLocalTurn(gameState: GameState, boardRef: any, turnDelay: number, playerScores: number[]) {\n\tif (gameState.AIs[gameState.turn] !== undefined) {\n\t\tconst { x, y } = (gameState.AIs[gameState.turn] as AI).doTurn(gameState, playerScores);\n\t\tsetTimeout(\n\t\t\t() => boardRef.current?.dispatchEvent(\n\t\t\t\tnew CustomEvent('selectSquare',\n\t\t\t\t\t{ detail: { x: x, y: y } })),\n\t\t\tturnDelay);\n\t}\n}\n\nclass App extends React.Component<GameProps, GameState> {\n\tconstructor(props: GameProps) {\n\t\tsuper(props);\n\n\t\tconst { winLength, limit, AINames, delay } = props;\n\n\t\tlet AIs: (AI | undefined)[] = [];\n\t\tfor (let i = 0; i < AINames.length; i++) {\n\t\t\tswitch (AINames[i]) {\n\t\t\t\tcase \"fuzzy\":\n\t\t\t\t\tAIs.push(new Fuzzy(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elk\":\n\t\t\t\t\tAIs.push(new Elk(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elkatt\":\n\t\t\t\t\tAIs.push(new ElkAtt(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elkdef\":\n\t\t\t\t\tAIs.push(new ElkDef(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elksurf\":\n\t\t\t\t\tAIs.push(new ElkSurf(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elktimid\":\n\t\t\t\t\tAIs.push(new ElkTimid(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tAIs.push(undefined);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.state = {\n\t\t\tturn: 0,\n\t\t\tplacements: [],\n\t\t\tmap: {},\n\t\t\tplayerCount: AINames.length,\n\t\t\tmoveLimit: (limit > 0 ? limit : 0),\n\t\t\twinLength: winLength,\n\t\t\tisLimited: limit > 0,\n\t\t\tdelay,\n\t\t\tAIs\n\t\t};\n\n\t\tfor (let i = -1; i <= 1; i++) {\n\t\t\tfor (let j = -1; j <= 1; j++) {\n\t\t\t\tthis.state = { ...this.state, ...addChunk(this.state, i, j) };\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { iconConfig } = this.props;\n\t\tconst { AIs } = this.state;\n\n\t\treturn (<Board\n\t\t\ticonConfig={iconConfig}\n\t\t\tgameState={this.state}\n\t\t\tbroadcast={(gs: GameState, callback: (gs: GameState) => void) => {\n\t\t\t\tthis.setState(gs);\n\t\t\t\tcallback(gs);\n\t\t\t}}\n\t\t\tdoLocalTurn={doLocalTurn}\n\t\t\tcanMove={AIs[this.state.turn] === undefined}\n\t\t/>);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport reportWebVitals from './reportWebVitals';\nimport ThemeSelector from './ThemeSelector';\nimport { CircleIcon } from './assets/CircleIcon';\nimport { CrossIcon } from './assets/CrossIcon';\nimport { DiamondIcon } from './assets/DiamondIcon';\nimport { SquareIcon } from './assets/SquareIcon';\nimport { Menu } from './Menu';\nimport App from './App';\n\nconst params = new URLSearchParams(window.location.search);\n\nconst openGame = params.get('game');\n\nlet winLength = params.get('win') ? parseInt(params.get('win') as string, 10) : 5;\nlet playerCount = params.get('count') ? parseInt(params.get('count') as string, 10) : 2;\nlet limit = params.get('limit') ? parseInt(params.get('limit') as string, 10) : 0;\nlet delay = params.get('delay') ? parseInt(params.get('delay') as string, 10) : 200;\nlet AINames = []\nfor (let i = 0; i < playerCount; i++) {\n\tAINames.push(params.get(`p${i + 1}`) || 'player');\n}\n\nlet iconConfig = {\n\tplayerColors: [\n\t\t'#5588ff',\n\t\t'#ff3344',\n\t\t\"#33ff44\",\n\t\t'#ffcc33'\n\t],\n\tplayerIcons: [\n\t\tCircleIcon,\n\t\tCrossIcon,\n\t\tDiamondIcon,\n\t\tSquareIcon\n\t]\n};\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeSelector theme={params.get('theme') || 'default'}>\n\t\t\t{openGame ? <App\n\t\t\t\twinLength={winLength}\n\t\t\t\tlimit={limit}\n\t\t\t\tdelay={delay}\n\t\t\t\tAINames={AINames}\n\t\t\t\ticonConfig={iconConfig}\n\t\t\t/> : <Menu\n\t\t\t\twinLength={winLength}\n\t\t\t\tlimit={limit}\n\t\t\t\tdelay={delay}\n\t\t\t\tAINames={AINames}\n\t\t\t\ticonConfig={iconConfig}\n\t\t\t/>}\n\t\t</ThemeSelector>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const CircleIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M500,0C223.86,0,0,223.86,0,500s223.86,500,500,500,500-223.86,500-500S776.14,0,500,0Zm0,800c-165.69,0-300-134.31-300-300S334.31,200,500,200,800,334.31,800,500,665.69,800,500,800Z\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const CrossIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<polygon fill={props.color} points=\"1000 858.58 641.42 500 1000 141.42 858.58 0 500 358.58 141.42 0 0 141.42 358.58 500 0 858.58 141.42 1000 500 641.42 858.58 1000 1000 858.58\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const DiamondIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M500,0,0,500l500,500,500-500Zm0,717.16L282.84,500,500,282.84,717.16,500Z\" transform=\"translate(0 0)\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const SquareIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M0,0V1000H1000V0ZM800,800H200V200H800Z\" />\r\n\t\t</svg>\r\n\t);\r\n}"],"sourceRoot":""}