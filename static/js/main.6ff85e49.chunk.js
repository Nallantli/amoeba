(this.webpackJsonpamoeba=this.webpackJsonpamoeba||[]).push([[0],{19:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(13),i=n.n(o),c=(n(19),n(14)),u=n(2),h=n(3),f=n(4),s=n(5),l=n(8),d=n(6),y=n(0),p=function(t){var e=t.x,n=t.y,a=t.id,o=t.value,i=t.win,c=t.canPlayerMove,u=t.onClick,h=t.view,f=t.config,s=h.spaceSize;return Object(y.jsx)("button",{id:a,onClick:0===o&&!i&&c?u:function(){},className:"space",style:{position:"absolute",width:"".concat(s,"px"),height:"".concat(s,"px"),left:"".concat(e*s,"px"),top:"".concat(n*s,"px")},children:o>0&&r.a.createElement(f.playerIcons[o-1],{color:f.playerColors[o-1]})})},v=function(t){var e=t.chunkData,n=t.posX,a=t.posY,r=t.chunkX,o=t.chunkY,i=t.win,c=t.canPlayerMove,u=t.view,h=t.selectSquare,f=t.config,s=u.spaceSize;return Object(y.jsx)("div",{className:"chunk",style:{position:"absolute",width:"".concat(3*s,"px"),height:"".concat(3*s,"px"),left:"".concat(3*n*s,"px"),top:"".concat(3*a*s,"px")},children:e.map((function(t,e){return t.map((function(t,n){return Object(y.jsx)(p,{id:"".concat(e+3*r,"_").concat(n+3*o),value:t,x:e,y:n,onClick:function(){return h({detail:{x:3*r+e,y:3*o+n}})},win:i,canPlayerMove:c,view:u,config:f},"".concat(e+3*r,"_").concat(n+3*o))}))}))})},x=n(7),g=n(10);function w(t,e){for(;t<0;)t+=e;return t%e}function m(t){return 1===t||0===t?t:m(t-2)+m(t-1)}function b(t,e,n,a){for(var r=[];S(t,e,n)===a;)r.push({x:e,y:n}),e++;return{ps:r,type:0}}function j(t,e,n,a){for(var r=[];S(t,e,n)===a;)r.push({x:e,y:n}),n++;return{ps:r,type:1}}function L(t,e,n,a){for(var r=[];S(t,e,n)===a;)r.push({x:e,y:n}),n++,e++;return{ps:r,type:2}}function O(t,e,n,a){for(var r=[];S(t,e,n)===a;)r.push({x:e,y:n}),n--,e++;return{ps:r,type:3}}function S(t,e,n){var a=t.map[Math.floor(e/3)+"_"+Math.floor(n/3)];return void 0===a?0:a.chunkData[w(e,3)][w(n,3)]}function M(t){for(var e=t.playerCount,n=t.winLength,a=t.placements,r=[],o=0;o<e;o++)r.push([]);a.forEach((function(e){[b(t,e.x,e.y,e.v),j(t,e.x,e.y,e.v),L(t,e.x,e.y,e.v),O(t,e.x,e.y,e.v)].forEach((function(t){if(!(t.ps.length<n)){var a=!1,o=[];r[e.v-1].forEach((function(e,n){e.type===t.type&&function(t,e){for(var n=0;n<t.length;n++)for(var a=0;a<e.length;a++)if(t[n].x===e[a].x&&t[n].y===e[a].y)return!0;return!1}(e.ps,t.ps)&&(e.ps.length<t.ps.length?o.push(n):a=!0)})),o.forEach((function(t){return r[e.v-1][t].old=!0})),a||r[e.v-1].push(t)}}))}));var i=[];return r.map((function(t){return t.filter((function(t){return void 0===t.old}))})),r.forEach((function(t){var e=0;t.forEach((function(t){e+=m(t.ps.length-n+2)})),i.push(e)})),i}function k(t){if(0===t.placements.length)return!1;var e=t.placements[t.placements.length-1],n=e.x,a=e.y,r=t.winLength,o=t.isLimited,i=t.moveLimit;if(o)return 0===i;var c=S(t,n,a);if(0===c)return!1;for(var u=0;u<r;u++){for(var h=[],f=0;f<r;f++){var s=S(t,n-u+f,a);if(void 0===s)break;if(s!==c)break;h.push(n-u+f+"_"+a)}if(h.length===r)return h.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var l=0;l<r;l++){for(var d=[],y=0;y<r;y++){var p=S(t,n,a-l+y);if(void 0===p)break;if(p!==c)break;d.push(n+"_"+(a-l+y))}if(d.length===r)return d.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var v=0;v<r;v++){for(var x=[],g=0;g<r;g++){var w=S(t,n-v+g,a-v+g);if(void 0===w)break;if(w!==c)break;x.push(n-v+g+"_"+(a-v+g))}if(x.length===r)return x.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var m=0;m<r;m++){for(var b=[],j=0;j<r;j++){var L=S(t,n-m+j,a+m-j);if(void 0===L)break;if(L!==c)break;b.push(n-m+j+"_"+(a+m-j))}if(b.length===r)return b.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}return!1}function E(t,e,n){var a=t.map;if(void 0!==a[e+"_"+n])return t;for(var r=[],o=0;o<3;o++){r[o]=[];for(var i=0;i<3;i++)r[o][i]=0}return Object(u.a)(Object(u.a)({},t),{},{map:Object(u.a)(Object(u.a)({},a),{},Object(g.a)({},"".concat(e,"_").concat(n),{x:e,y:n,chunkData:r}))})}function C(t,e,n){var a=t,r=a.turn,o=a.moveLimit,i=a.placements,c=a.playerCount,h=Math.floor(e/3),f=Math.floor(n/3),s=r+1,l=t.map[h+"_"+f];return void 0===l?C(E(t,h,f),e,n):(l.chunkData[w(e,3)][w(n,3)]=s,t=function(t,e,n){for(var a=e-1;a<=e+1;a++)for(var r=n-1;r<=n+1;r++)t=Object(u.a)(Object(u.a)({},t),E(t,a,r));return t}(t,h,f),Object(u.a)(Object(u.a)({},t),{},{map:Object(u.a)(Object(u.a)({},t.map),{},Object(g.a)({},h+"_"+f,l)),placements:[].concat(Object(x.a)(i),[{x:e,y:n,v:s}]),turn:(r+1)%c,moveLimit:o-(r===c-1?1:0)}))}var T=function(t){return Object(y.jsxs)("div",{id:"limit-dialog",children:["Turns Left: ",t.moveLimit]})},D=function(t){return Object(y.jsx)("div",{id:"score-dialog",children:Object(y.jsx)("table",{children:Object(y.jsx)("tbody",{children:t.playerScores.map((function(e,n){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{width:"40px"},children:r.a.createElement(t.config.playerIcons[n],{color:t.config.playerColors[n]})}),Object(y.jsx)("td",{children:e})]},n)}))})})})},Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).boardRef=void 0,a.selectSquare=a.selectSquare.bind(Object(s.a)(a)),a.postMove=a.postMove.bind(Object(s.a)(a)),a.handleScroll=a.handleScroll.bind(Object(s.a)(a)),a.handleTouchStart=a.handleTouchStart.bind(Object(s.a)(a)),a.handleTouchMove=a.handleTouchMove.bind(Object(s.a)(a)),a.handleTouchEnd=a.handleTouchEnd.bind(Object(s.a)(a)),a.handleZoom=a.handleZoom.bind(Object(s.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(s.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(s.a)(a)),a.boardRef=r.a.createRef(),a.state={view:{offsetX:0,offsetY:0,spaceSize:50},xLow:0,xHigh:0,yLow:0,yHigh:0,isTouching:!1,touchStart:{x:0,y:0},touchOffset:{x:0,y:0},shiftScroll:!1,ctrlScroll:!1},a}return Object(f.a)(n,[{key:"handleZoom",value:function(t){var e=this.state.view,n=e.offsetX,a=e.offsetY,r=e.spaceSize,o=Math.max(15,Math.min(160,r*t));this.setState({view:{offsetX:n*(o/r),offsetY:a*(o/r),spaceSize:o}})}},{key:"handleScroll",value:function(t){t.preventDefault();var e=this.state,n=e.shiftScroll,a=e.ctrlScroll,r=this.state.view,o=r.offsetX,i=r.offsetY,c=r.spaceSize;if(a)this.handleZoom(Math.exp(t.deltaY/200));else{var u=.25*t.deltaX,h=.25*t.deltaY;this.setState({view:{offsetX:o-(n?h:u),offsetY:i-(n?u:h),spaceSize:c}})}}},{key:"handleTouchMove",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0];this.setState({touchOffset:{x:n.pageX,y:n.pageY}})}},{key:"handleTouchStart",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0];this.setState({isTouching:!0,touchStart:{x:n.pageX,y:n.pageY},touchOffset:{x:n.pageX,y:n.pageY}})}},{key:"handleTouchEnd",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0],a=this.state,r=a.view,o=a.touchStart,i=a.touchOffset,c=r.offsetX,u=r.offsetY,h=r.spaceSize;this.setState({isTouching:!1,view:{offsetX:c+(i.x-o.x),offsetY:u+(i.y-o.y),spaceSize:h}},(function(){Math.pow(o.x-n.pageX,2)+Math.pow(o.y-n.pageY,2)<10&&void 0!==n.target.click&&n.target.click()}))}},{key:"handleKeyDown",value:function(t){switch(t.key){case"Shift":this.setState({shiftScroll:!0});break;case"Control":this.setState({ctrlScroll:!0})}}},{key:"handleKeyUp",value:function(t){switch(t.key){case"Shift":this.setState({shiftScroll:!1});break;case"Control":this.setState({ctrlScroll:!1})}}},{key:"componentDidMount",value:function(){var t;window.addEventListener("wheel",this.handleScroll,{passive:!1}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),window.addEventListener("touchcancel",this.handleTouchEnd,{passive:!1}),window.addEventListener("keydown",this.handleKeyDown,{passive:!1}),window.addEventListener("keyup",this.handleKeyUp,{passive:!1}),null===(t=this.boardRef.current)||void 0===t||t.addEventListener("selectSquare",this.selectSquare),this.props.doLocalTurn(this.props.gameState,this.boardRef,this.props.config.turnDelay)}},{key:"postMove",value:function(t){var e=this.props.config,n=t.isLimited,a=t.playerCount,r=t.placements,o=t.turn;if(k(t)){var i=w(n?M(t).map((function(t,e){return{e:t,i:e}})).sort((function(t,e){return e.e-t.e}))[0].i:o-1,a);r.forEach((function(n){var a=document.getElementById(n.x+"_"+n.y);a.classList.add("amoeba-square");var r=[];"none"!==window.getComputedStyle(a).boxShadow&&r.push(window.getComputedStyle(a).boxShadow),0===S(t,n.x,n.y+1)&&r.push("".concat(e.playerColors[i]," 0rem 5rem")),0===S(t,n.x+1,n.y)&&0===S(t,n.x,n.y+1)&&0===S(t,n.x+1,n.y+1)&&r.push("".concat(e.playerColors[i]," 5rem 5rem")),0===S(t,n.x+1,n.y)&&r.push("".concat(e.playerColors[i]," 5rem 0rem")),0===S(t,n.x+1,n.y)&&0===S(t,n.x,n.y-1)&&0===S(t,n.x+1,n.y-1)&&r.push("".concat(e.playerColors[i]," 5rem -5rem")),0===S(t,n.x,n.y-1)&&r.push("".concat(e.playerColors[i]," 0rem -5rem")),0===S(t,n.x-1,n.y)&&0===S(t,n.x,n.y+1)&&0===S(t,n.x-1,n.y+1)&&r.push("".concat(e.playerColors[i]," -5rem 5rem")),0===S(t,n.x-1,n.y)&&r.push("".concat(e.playerColors[i]," -5rem 0rem")),0===S(t,n.x-1,n.y)&&0===S(t,n.x,n.y-1)&&0===S(t,n.x-1,n.y-1)&&r.push("".concat(e.playerColors[i]," -5rem -5rem")),a.style.boxShadow=r.join(", ")}))}else this.props.doLocalTurn(t,this.boardRef,e.turnDelay)}},{key:"selectSquare",value:function(t){var e,n=this.props,a=n.broadcast,r=n.gameState,o=t.detail,i=o.x,c=o.y;null===(e=document.getElementById(i+"_"+c))||void 0===e||e.classList.add("space-pressed"),a(C(r,i,c),this.postMove)}},{key:"render",value:function(){var t=this,e=this.props,n=e.config,a=e.canMove,r=e.gameState,o=e.gameState,i=o.moveLimit,c=o.turn,u=o.map,h=o.isLimited,f=o.playerCount,s=this.state,l=s.view,d=s.view,p=d.offsetX,x=d.offsetY,g=d.spaceSize,m=s.isTouching,b=s.touchOffset,j=s.touchStart,L=s.xLow,O=s.yLow,S=s.xHigh,E=s.yHigh,C=3*g*(S-L+1),Y=3*g*(E-O+1),_=h?M(r):[],z=k(r);return Object(y.jsxs)("div",{id:"screen",children:[Object(y.jsx)("div",{id:"player-bar",style:{background:z?n.playerColors[w(h?_.map((function(t,e){return{e:t,i:e}})).sort((function(t,e){return e.e-t.e}))[0].i:c-1,f)]:n.playerColors[c]}}),Object(y.jsxs)("div",{id:"zoom-bar",children:[Object(y.jsx)("button",{id:"zoom-in",onClick:function(){return t.handleZoom(1.5)},children:"+"}),Object(y.jsx)("button",{id:"zoom-out",onClick:function(){return t.handleZoom(2/3)},children:"-"})]}),h&&Object(y.jsx)(T,{moveLimit:i}),h&&Object(y.jsx)(D,{playerScores:_,config:n}),Object(y.jsx)("button",{id:"reset-button",onClick:function(){return window.location.reload()},children:"Reset Game"}),Object(y.jsx)("div",{className:"board",ref:this.boardRef,children:Object(y.jsx)("div",{className:"chunk-container",style:{position:"absolute",width:"".concat(C,"px"),height:"".concat(Y,"px"),marginTop:"".concat(-Y/2+x+(m?b.y-j.y:0),"px"),marginLeft:"".concat(-C/2+p+(m?b.x-j.x:0),"px")},children:Object.values(u).map((function(e){return Object(y.jsx)(v,{config:n,posX:e.x-L,posY:e.y-O,chunkX:e.x,chunkY:e.y,chunkData:e.chunkData,selectSquare:t.selectSquare,win:z,canPlayerMove:a(r),view:l},e.x+"_"+e.y)}))})})]})}}]),n}(r.a.Component),_=function(t){return Object(y.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(y.jsx)("path",{fill:t.color,d:"M500,0C223.86,0,0,223.86,0,500s223.86,500,500,500,500-223.86,500-500S776.14,0,500,0Zm0,800c-165.69,0-300-134.31-300-300S334.31,200,500,200,800,334.31,800,500,665.69,800,500,800Z"})})},z=function(t){return Object(y.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(y.jsx)("polygon",{fill:t.color,points:"1000 858.58 641.42 500 1000 141.42 858.58 0 500 358.58 141.42 0 0 141.42 358.58 500 0 858.58 141.42 1000 500 641.42 858.58 1000 1000 858.58"})})},X=function(t){return Object(y.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(y.jsx)("path",{fill:t.color,d:"M500,0,0,500l500,500,500-500Zm0,717.16L282.84,500,500,282.84,717.16,500Z",transform:"translate(0 0)"})})},I=function(t){return Object(y.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(y.jsx)("path",{fill:t.color,d:"M0,0V1000H1000V0ZM800,800H200V200H800Z"})})},q=function(){function t(e,n,a){Object(h.a)(this,t),this.winLength=void 0,this.icon=void 0,this.pCount=void 0,this.winLength=e,this.icon=n,this.pCount=a}return Object(f.a)(t,[{key:"doTurn",value:function(t){throw new Error("Method not implemented.")}}]),t}();function B(t,e,n,a,r,o,i,c){for(var u=0,h=-1;i(t,e+h*r,n+h*o)===a;){for(var f=0,s=e+h*r,l=n+h*o;i(t,s,l)===a||s===e&&l===n;)f++,s+=r,l+=o;if(f<c)for(var d=f;d<=c;d++){var y=e+(h+d)*r,p=n+(h+d)*o;if(i(t,y,p)!==a&&0!==i(t,y,p)){f=0;break}}f>u&&(u=f),h--}return u}for(var Z=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,o=[];if(n.forEach((function(n){for(var i=function(i){for(var c=function(c){if(0===i&&0===c)return"continue";if(0!==S(t,n.x+i,n.y+c))return"continue";var u=!1;if(o.forEach((function(t){t.x===n.x+i&&t.y===n.y+c&&(u=!0)})),u)return"continue";var h={x:n.x+i,y:n.y+c,att:Math.max(B(t,n.x+i,n.y+c,e.icon,1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,-1,S,e.winLength)),def:Math.max.apply(Math,Object(x.a)(Array(e.pCount).fill(0).map((function(a,r){return Math.max(B(t,n.x+i,n.y+c,r+1,1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,-1,S,e.winLength))})).filter((function(t,n){return n!==e.icon-1}))))};h.att>a&&(a=h.att),h.def>r&&(r=h.def),o.push(h)},u=-1;u<=1;u++)c(u)},c=-1;c<=1;c++)i(c)})),0===o.length)return{x:0,y:0};var i=0,c=0,u=o.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>i&&(i=t.def)})),u=u.filter((function(t){return t.def===i}));var h=o.filter((function(t){return t.def===r}));return h.forEach((function(t){t.att>c&&(c=t.att)})),h=h.filter((function(t){return t.att===c})),a-r>0?u[Math.floor(Math.random()*u.length)]:h[Math.floor(Math.random()*h.length)]}}]),n}(q),R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,o=[];if(n.forEach((function(n){for(var i=function(i){for(var c=function(c){if(0===i&&0===c)return"continue";if(0!==S(t,n.x+i,n.y+c))return"continue";var u=!1;if(o.forEach((function(t){t.x===n.x+i&&t.y===n.y+c&&(u=!0)})),u)return"continue";var h={x:n.x+i,y:n.y+c,att:Math.max(B(t,n.x+i,n.y+c,e.icon,1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,-1,S,e.winLength)),def:Math.max.apply(Math,Object(x.a)(Array(e.pCount).fill(0).map((function(a,r){return Math.max(B(t,n.x+i,n.y+c,r+1,1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,-1,S,e.winLength))})).filter((function(t,n){return n!==e.icon-1}))))};h.att>a&&(a=h.att),h.def>r&&(r=h.def),o.push(h)},u=-1;u<=1;u++)c(u)},c=-1;c<=1;c++)i(c)})),0===o.length)return{x:0,y:0};var i=0,c=0,u=o.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>i&&(i=t.def)})),u=u.filter((function(t){return t.def===i}));var h=o.filter((function(t){return t.def===r}));return h.forEach((function(t){t.att>c&&(c=t.att)})),h=h.filter((function(t){return t.att===c})),a-r>-1?u[Math.floor(Math.random()*u.length)]:h[Math.floor(Math.random()*h.length)]}}]),n}(q),K=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,o=[];if(n.forEach((function(n){for(var i=function(i){for(var c=function(c){if(0===i&&0===c)return"continue";if(0!==S(t,n.x+i,n.y+c))return"continue";var u=!1;if(o.forEach((function(t){t.x===n.x+i&&t.y===n.y+c&&(u=!0)})),u)return"continue";var h={x:n.x+i,y:n.y+c,att:Math.max(B(t,n.x+i,n.y+c,e.icon,1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,-1,S,e.winLength)),def:Math.max.apply(Math,Object(x.a)(Array(e.pCount).fill(0).map((function(a,r){return Math.max(B(t,n.x+i,n.y+c,r+1,1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,-1,S,e.winLength))})).filter((function(t,n){return n!==e.icon-1}))))};h.att>a&&(a=h.att),h.def>r&&(r=h.def),o.push(h)},u=-1;u<=1;u++)c(u)},c=-1;c<=1;c++)i(c)})),0===o.length)return{x:0,y:0};var i=0,c=0,u=o.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>i&&(i=t.def)})),u=u.filter((function(t){return t.def===i}));var h=o.filter((function(t){return t.def===r}));return h.forEach((function(t){t.att>c&&(c=t.att)})),h=h.filter((function(t){return t.att===c})),a-r>1?u[Math.floor(Math.random()*u.length)]:h[Math.floor(Math.random()*h.length)]}}]),n}(q),N=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,o=[];if(n.forEach((function(n){for(var i=function(i){for(var c=function(c){if(0===i&&0===c)return"continue";if(0!==S(t,n.x+i,n.y+c))return"continue";var u=!1;if(o.forEach((function(t){t.x===n.x+i&&t.y===n.y+c&&(u=!0)})),u)return"continue";var h={x:n.x+i,y:n.y+c,att:Math.max(B(t,n.x+i,n.y+c,e.icon,1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,e.icon,1,-1,S,e.winLength)),def:Math.max.apply(Math,Object(x.a)(Array(e.pCount).fill(0).map((function(a,r){return Math.max(B(t,n.x+i,n.y+c,r+1,1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,0,S,e.winLength),B(t,n.x+i,n.y+c,r+1,-1,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,0,-1,S,e.winLength),B(t,n.x+i,n.y+c,r+1,1,-1,S,e.winLength))})).filter((function(t,n){return n!==e.icon-1}))))};h.att>a&&(a=h.att),h.def>r&&(r=h.def),o.push(h)},u=-1;u<=1;u++)c(u)},c=-1;c<=1;c++)i(c)})),0===o.length)return{x:0,y:0};var i=0,c=0,u=o.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>i&&(i=t.def)})),u=u.filter((function(t){return t.def===i}));var h=o.filter((function(t){return t.def===r}));return h.forEach((function(t){t.att>c&&(c=t.att)})),h=h.filter((function(t){return t.att===c})),a>=this.winLength?u[Math.floor(Math.random()*u.length)]:r>=this.winLength?h[Math.floor(Math.random()*h.length)]:a>=r?u[Math.floor(Math.random()*u.length)]:h[Math.floor(Math.random()*h.length)]}}]),n}(q),P=new URLSearchParams(window.location.search),H=P.get("win")?parseInt(P.get("win"),10):5,U=P.get("count")?parseInt(P.get("count"),10):2,F=P.get("limit")?parseInt(P.get("limit"),10):0,A=[],V=0;V<U;V++)switch(P.get("p".concat(V+1))){case"fuzzy":A.push(new N(H,V+1,U));break;case"elk":A.push(new Z(H,V+1,U));break;case"elkatt":A.push(new R(H,V+1,U));break;case"elkdef":A.push(new K(H,V+1,U));break;default:A.push(void 0)}for(var J={turn:0,placements:[],map:{},playerCount:U,moveLimit:F>0?F:0,winLength:H,isLimited:F>0},G=-1;G<=1;G++)for(var Q=-1;Q<=1;Q++)J=Object(u.a)(Object(u.a)({},J),E(J,G,Q));function W(t,e,n){if(void 0!==A[t.turn]){var a=A[t.turn].doTurn(t),r=a.x,o=a.y;setTimeout((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.dispatchEvent(new CustomEvent("selectSquare",{detail:{x:r,y:o}}))}),n)}}var $=function(){var t=P.get("delay")?parseInt(P.get("delay"),10):0,e=Object(a.useState)(J),n=Object(c.a)(e,2),r=n[0],o=n[1];return Object(y.jsx)(Y,{config:{playerColors:["#5588ff","#ff3344","#33ff44","#ffcc33"],playerIcons:[_,z,X,I],turnDelay:t},gameState:r,broadcast:function(t,e){o(t),e(t)},doLocalTurn:W,canMove:function(t){return void 0===A[t.turn]}})},tt=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,24)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),o(t),i(t)}))},et=r.a.lazy((function(){return n.e(3).then(n.bind(null,25))})),nt=r.a.lazy((function(){return n.e(4).then(n.bind(null,26))})),at=function(t){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(r.a.Suspense,{fallback:function(){return Object(y.jsx)("div",{})},children:["default"===t.theme&&Object(y.jsx)(et,{}),"win98"===t.theme&&Object(y.jsx)(nt,{})]}),t.children]})},rt=new URLSearchParams(window.location.search);i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(at,{theme:rt.get("theme")||"default",children:Object(y.jsx)($,{})})}),document.getElementById("root")),tt()}},[[21,1,2]]]);
//# sourceMappingURL=main.6ff85e49.chunk.js.map