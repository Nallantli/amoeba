(this.webpackJsonpamoeba=this.webpackJsonpamoeba||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(7),r=n.n(a),i=n(11),c=n.n(i),o=(n(16),function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,21)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),i(t),c(t)}))}),u=n(0),s=r.a.lazy((function(){return n.e(3).then(n.bind(null,22))})),f=r.a.lazy((function(){return n.e(4).then(n.bind(null,23))})),l=function(t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(r.a.Suspense,{fallback:function(){return Object(u.jsx)("div",{})},children:["default"===t.theme&&Object(u.jsx)(s,{}),"win98"===t.theme&&Object(u.jsx)(f,{})]}),t.children]})},h=n(6),d=n(1),p=n(2),v=n(3),y=n(5),x=n(4);var j=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state=Object(d.a)(Object(d.a)({},t),{},{tab:"regular"}),a}return Object(v.a)(n,[{key:"render",value:function(){var t=this,e=this.props.AISelectOptions,n=this.state,a=n.winLength,i=n.limit,c=n.delay,o=n.AINames,s=n.iconConfig,f=n.tab,l=function(e){var n=Object(h.a)(t.state.AINames);n.splice(e,1),t.setState(Object(d.a)(Object(d.a)({},t.state),{},{AINames:n}))},p=function(e,n){var a=Object(h.a)(t.state.AINames);a[e]=n,t.setState(Object(d.a)(Object(d.a)({},t.state),{},{AINames:a}))},v=o.length>1,y=Object.keys(e);return Object(u.jsxs)("div",{id:"menu",children:[Object(u.jsxs)("div",{id:"tabs",children:[Object(u.jsx)("button",{className:"tablinks-".concat("regular"===f?"active":"inactive"),onClick:function(){return t.setState(Object(d.a)(Object(d.a)({},t.state),{},{tab:"regular"}))},children:"Regular Mode"}),Object(u.jsx)("button",{className:"tablinks-".concat("limit"===f?"active":"inactive"),onClick:function(){return t.setState(Object(d.a)(Object(d.a)({},t.state),{},{tab:"limit"}))},children:"Limit Mode"})]}),Object(u.jsx)("div",{id:"menu-options-".concat("regular"===f?"active":"inactive")}),Object(u.jsx)("div",{id:"menu-options-".concat("limit"===f?"active":"inactive"),children:Object(u.jsxs)("div",{id:"menu-limit",children:[Object(u.jsx)("span",{children:"Maximum Amount of Rounds:"}),Object(u.jsx)("input",{id:"input-limit",type:"text",defaultValue:i,onChange:function(e){t.setState(Object(d.a)(Object(d.a)({},t.state),{},{limit:parseInt(e.target.value,10)}))}})]})}),Object(u.jsxs)("div",{id:"menu-options",children:[Object(u.jsxs)("div",{id:"menu-winLength",children:[Object(u.jsx)("span",{children:"Length to Win or (Limit Mode) Gain Score:"}),Object(u.jsx)("input",{id:"input-winLength",type:"text",defaultValue:a,onChange:function(e){t.setState(Object(d.a)(Object(d.a)({},t.state),{},{winLength:parseInt(e.target.value,10)}))}})]}),Object(u.jsxs)("div",{id:"menu-delay",children:[Object(u.jsx)("span",{children:"Millisecond Delay Between Moves:"}),Object(u.jsx)("input",{id:"input-delay",type:"text",defaultValue:c,onChange:function(e){t.setState(Object(d.a)(Object(d.a)({},t.state),{},{delay:parseInt(e.target.value,10)}))}})]})]}),Object(u.jsx)("div",{id:"menu-players",children:o.map((function(t,e){return function(t){var e=t.AIName,n=t.index,a=t.iconConfig,i=t.removeItem,c=t.changeAI,o=t.canDelete,s=t.AIMenuOptions;return Object(u.jsxs)("div",{className:"menu-playerItem",children:[Object(u.jsx)("div",{className:"menu-playerItem-icon",children:r.a.createElement(a.playerIcons[n],{color:a.playerColors[n]})}),Object(u.jsx)("div",{className:"menu-playerItem-body",children:Object(u.jsxs)("div",{className:"menu-playerItem-AISelect",children:[Object(u.jsx)("span",{children:"Type:"}),Object(u.jsxs)("select",{id:"p".concat(n+1),onChange:function(t){return c(n,t.target.value)},children:[Object(u.jsx)("option",{selected:"player"===e,value:"player",children:"No AI"}),s.map((function(t){return Object(u.jsx)("option",{selected:e===t,value:t,children:t})}))]})]})}),o&&Object(u.jsx)("button",{className:"menu-playerItem-remove",onClick:function(){return i(n)},children:"X"})]})}({AIName:t,index:e,iconConfig:s,removeItem:l,changeAI:p,canDelete:v,AIMenuOptions:y})}))}),o.length<4&&Object(u.jsx)("button",{id:"menu-addPlayer",onClick:function(){t.setState(Object(d.a)(Object(d.a)({},t.state),{},{AINames:[].concat(Object(h.a)(o),["player"])}))},children:"Add Player"}),Object(u.jsx)("button",{id:"play-game",onClick:function(){var t="win=".concat(a,"&count=").concat(o.length,"&delay=").concat(c);"limit"===f&&(t+="&limit=".concat(i));for(var e=0;e<o.length;e++)"player"!==o[e]&&(t+="&p".concat(e+1,"=").concat(o[e]));var n=window.location.href.split("?")[0];window.location.assign("".concat(n,"?game=1&").concat(t))},children:"Play!"})]})}}]),n}(r.a.Component),b=function(){function t(e,n,a){Object(p.a)(this,t),this.winLength=void 0,this.icon=void 0,this.pCount=void 0,this.winLength=e,this.icon=n,this.pCount=a}return Object(v.a)(t,[{key:"doTurn",value:function(t){throw new Error("Method not implemented.")}}]),t}(),m=n(9);function g(t){var e=t.x,n=t.y,a=t.id,i=t.value,c=t.win,o=t.canPlayerMove,s=t.onClick,f=t.view,l=t.iconConfig,h=f.spaceSize;return Object(u.jsx)("button",{id:a,onClick:0===i&&!c&&o?s:function(){},className:"space",style:{position:"absolute",width:"".concat(h,"px"),height:"".concat(h,"px"),left:"".concat(e*h,"px"),top:"".concat(n*h,"px")},children:i>0&&r.a.createElement(l.playerIcons[i-1],{color:l.playerColors[i-1]})})}function O(t){var e=t.chunkData,n=t.posX,a=t.posY,r=t.chunkX,i=t.chunkY,c=t.win,o=t.canPlayerMove,s=t.view,f=t.view.spaceSize,l=t.selectSquare,h=t.iconConfig;return Object(u.jsx)("div",{className:"chunk",style:{position:"absolute",width:"".concat(3*f,"px"),height:"".concat(3*f,"px"),left:"".concat(3*n*f,"px"),top:"".concat(3*a*f,"px")},children:e.map((function(t,e){return t.map((function(t,n){return Object(u.jsx)(g,{id:"".concat(e+3*r,"_").concat(n+3*i),value:t,x:e,y:n,onClick:function(){return l({detail:{x:3*r+e,y:3*i+n}})},win:c,canPlayerMove:o,view:s,iconConfig:h},"".concat(e+3*r,"_").concat(n+3*i))}))}))})}function w(t,e){for(;t<0;)t+=e;return t%e}function L(t){return 1===t||0===t?t:L(t-2)+L(t-1)}function S(t,e,n,a){for(var r=[];M(t,e,n)===a;)r.push({x:e,y:n}),e++;return{ps:r,type:0}}function k(t,e,n,a){for(var r=[];M(t,e,n)===a;)r.push({x:e,y:n}),n++;return{ps:r,type:1}}function C(t,e,n,a){for(var r=[];M(t,e,n)===a;)r.push({x:e,y:n}),n++,e++;return{ps:r,type:2}}function E(t,e,n,a){for(var r=[];M(t,e,n)===a;)r.push({x:e,y:n}),n--,e++;return{ps:r,type:3}}function M(t,e,n){var a=t.map[Math.floor(e/3)+"_"+Math.floor(n/3)];return void 0===a?0:a.chunkData[w(e,3)][w(n,3)]}function I(t,e){return t.isLimited?T(t,e):[]}function T(t,e){for(var n=t.players,a=t.placements,r=[],i=0;i<n.length;i++)r.push([]);a.forEach((function(n){[S(t,n.x,n.y,n.v),k(t,n.x,n.y,n.v),C(t,n.x,n.y,n.v),E(t,n.x,n.y,n.v)].forEach((function(t){if(!(t.ps.length<e)){var a=!1,i=[];r[n.v-1].forEach((function(e,n){e.type===t.type&&function(t,e){for(var n=0;n<t.length;n++)for(var a=0;a<e.length;a++)if(t[n].x===e[a].x&&t[n].y===e[a].y)return!0;return!1}(e.ps,t.ps)&&(e.ps.length<t.ps.length?i.push(n):a=!0)})),i.forEach((function(t){return r[n.v-1][t].old=!0})),a||r[n.v-1].push(t)}}))}));var c=[];return r.map((function(t){return t.filter((function(t){return void 0===t.old}))})),r.forEach((function(t){var n=0;t.forEach((function(t){n+=L(t.ps.length-e+2)})),c.push(n)})),c}function A(t,e){if(0===t.placements.length)return!1;var n=t.placements[t.placements.length-1],a=n.x,r=n.y,i=t.isLimited,c=t.moveLimit;if(i)return 0===c;var o=M(t,a,r);if(0===o)return!1;for(var u=0;u<e;u++){for(var s=[],f=0;f<e;f++){var l=M(t,a-u+f,r);if(void 0===l)break;if(l!==o)break;s.push(a-u+f+"_"+r)}if(s.length===e)return s.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var h=0;h<e;h++){for(var d=[],p=0;p<e;p++){var v=M(t,a,r-h+p);if(void 0===v)break;if(v!==o)break;d.push(a+"_"+(r-h+p))}if(d.length===e)return d.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var y=0;y<e;y++){for(var x=[],j=0;j<e;j++){var b=M(t,a-y+j,r-y+j);if(void 0===b)break;if(b!==o)break;x.push(a-y+j+"_"+(r-y+j))}if(x.length===e)return x.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}for(var m=0;m<e;m++){for(var g=[],O=0;O<e;O++){var w=M(t,a-m+O,r+m-O);if(void 0===w)break;if(w!==o)break;g.push(a-m+O+"_"+(r+m-O))}if(g.length===e)return g.forEach((function(t){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.classList.add("win-square")})),!0}return!1}function N(t,e,n){var a=t.map;if(void 0!==a[e+"_"+n])return t;for(var r=[],i=0;i<3;i++){r[i]=[];for(var c=0;c<3;c++)r[i][c]=0}return Object(d.a)(Object(d.a)({},t),{},{map:Object(d.a)(Object(d.a)({},a),{},Object(m.a)({},"".concat(e,"_").concat(n),{x:e,y:n,chunkData:r}))})}function q(t,e,n){var a=t,r=a.turn,i=a.moveLimit,c=a.placements,o=a.players,u=Math.floor(e/3),s=Math.floor(n/3),f=r+1,l=t.map[u+"_"+s];return void 0===l?q(N(t,u,s),e,n):(l.chunkData[w(e,3)][w(n,3)]=f,t=function(t,e,n){for(var a=e-1;a<=e+1;a++)for(var r=n-1;r<=n+1;r++)t=Object(d.a)(Object(d.a)({},t),N(t,a,r));return t}(t,u,s),Object(d.a)(Object(d.a)({},t),{},{map:Object(d.a)(Object(d.a)({},t.map),{},Object(m.a)({},u+"_"+s,l)),placements:[].concat(Object(h.a)(c),[{x:e,y:n,v:f}]),turn:(r+1)%o.length,moveLimit:i-(r===o.length-1?1:0)}))}function D(t,e,n,a,r,i,c,o){for(var u=1,s=0,f=0;c(t,e+u*r,n+u*i)===a;)s++,u++;for(;0===c(t,e+u*r,n+u*i)&&u<o;)f++,u++;for(u=-1;c(t,e+u*r,n+u*i)===a;)s++,u--;for(;c(t,e+u*r,n+u*i)===a&&-u<o;)f++,u--;return f+s+1<o?0:s}function X(t,e,n,a,r,i,c,o){for(var u=0,s=-1;c(t,e+s*r,n+s*i)===a;){for(var f=0,l=e+s*r,h=n+s*i;c(t,l,h)===a||l===e&&h===n;)f++,l+=r,h+=i;if(f<o)for(var d=f;d<=o;d++){var p=e+(s+d)*r,v=n+(s+d)*i;if(c(t,p,v)!==a&&0!==c(t,p,v)){f=0;break}}f>u&&(u=f),s--}return u}function Y(t){return t[Math.floor(Math.random()*t.length)]}var _=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=[];if(n.forEach((function(n){for(var r=function(r){for(var i=function(i){if(0===r&&0===i)return"continue";if(0!==M(t,n.x+r,n.y+i))return"continue";if(a.find((function(t){return t.x===n.x+r&&t.y===n.y+i})))return"continue";var c=Array(e.pCount).fill(0).map((function(a,c){return Math.max(X(t,n.x+r,n.y+i,c+1,1,0,M,e.winLength),X(t,n.x+r,n.y+i,c+1,1,1,M,e.winLength),X(t,n.x+r,n.y+i,c+1,0,1,M,e.winLength),X(t,n.x+r,n.y+i,c+1,-1,1,M,e.winLength),X(t,n.x+r,n.y+i,c+1,-1,0,M,e.winLength),X(t,n.x+r,n.y+i,c+1,-1,-1,M,e.winLength),X(t,n.x+r,n.y+i,c+1,0,-1,M,e.winLength),X(t,n.x+r,n.y+i,c+1,1,-1,M,e.winLength))}));a.push({x:n.x+r,y:n.y+i,att:c[e.icon-1],def:Math.max.apply(Math,Object(h.a)(c.filter((function(t,n){return n!==e.icon-1}))))})},c=-1;c<=1;c++)i(c)},i=-1;i<=1;i++)r(i)})),0===a.length)return{x:0,y:0};var r=[].concat(a).sort((function(t,e){return t.att===e.att?e.def-t.def:e.att-t.att})),i=[].concat(a).sort((function(t,e){return t.def===e.def?e.att-t.att:e.def-t.def}));return r=r.filter((function(t){var e=t.att,n=t.def;return e===r[0].att&&n===r[0].def})),i=i.filter((function(t){var e=t.att,n=t.def;return e===i[0].att&&n===i[0].def})),r[0].att>this.winLength-1?Y(r):i[0].def>this.winLength-1?Y(i):r[0].att>=i[0].def?Y(r):Y(i)}}]),n}(b),z=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,i=[];if(n.forEach((function(n){for(var c=function(c){for(var o=function(o){if(0===c&&0===o)return"continue";if(0!==M(t,n.x+c,n.y+o))return"continue";if(i.find((function(t){return t.x===n.x+c&&t.y===n.y+o})))return"continue";var u=Array(e.pCount).fill(0).map((function(a,r){return D(t,n.x+c,n.y+o,r+1,1,0,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,1,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,0,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,-1,1,M,e.winLength)})),s={x:n.x+c,y:n.y+o,att:u[e.icon-1],def:Math.max.apply(Math,Object(h.a)(u.filter((function(t,n){return n!==e.icon-1}))))};s.att>a&&(a=s.att),s.def>r&&(r=s.def),i.push(s)},u=-1;u<=1;u++)o(u)},o=-1;o<=1;o++)c(o)})),0===i.length)return{x:0,y:0};var c=0,o=0,u=i.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>c&&(c=t.def)})),u=u.filter((function(t){return t.def===c}));var s=i.filter((function(t){return t.def===r}));return s.forEach((function(t){t.att>o&&(o=t.att)})),s=s.filter((function(t){return t.att===o})),Y(a-r>0?u:s)}}]),n}(b),B=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,i=[];if(n.forEach((function(n){for(var c=function(c){for(var o=function(o){if(0===c&&0===o)return"continue";if(0!==M(t,n.x+c,n.y+o))return"continue";if(i.find((function(t){return t.x===n.x+c&&t.y===n.y+o})))return"continue";var u=Array(e.pCount).fill(0).map((function(a,r){return D(t,n.x+c,n.y+o,r+1,1,0,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,1,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,0,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,-1,1,M,e.winLength)})),s={x:n.x+c,y:n.y+o,att:u[e.icon-1],def:Math.max.apply(Math,Object(h.a)(u.filter((function(t,n){return n!==e.icon-1}))))};s.att>a&&(a=s.att),s.def>r&&(r=s.def),i.push(s)},u=-1;u<=1;u++)o(u)},o=-1;o<=1;o++)c(o)})),0===i.length)return{x:0,y:0};var c=0,o=0,u=i.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>c&&(c=t.def)})),u=u.filter((function(t){return t.def===c}));var s=i.filter((function(t){return t.def===r}));return s.forEach((function(t){t.att>o&&(o=t.att)})),s=s.filter((function(t){return t.att===o})),Y(a-r>-1?u:s)}}]),n}(b),Z=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=0,r=0,i=[];if(n.forEach((function(n){for(var c=function(c){for(var o=function(o){if(0===c&&0===o)return"continue";if(0!==M(t,n.x+c,n.y+o))return"continue";if(i.find((function(t){return t.x===n.x+c&&t.y===n.y+o})))return"continue";var u=Array(e.pCount).fill(0).map((function(a,r){return D(t,n.x+c,n.y+o,r+1,1,0,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,1,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,0,1,M,e.winLength)+D(t,n.x+c,n.y+o,r+1,-1,1,M,e.winLength)})),s={x:n.x+c,y:n.y+o,att:u[e.icon-1],def:Math.max.apply(Math,Object(h.a)(u.filter((function(t,n){return n!==e.icon-1}))))};s.att>a&&(a=s.att),s.def>r&&(r=s.def),i.push(s)},u=-1;u<=1;u++)o(u)},o=-1;o<=1;o++)c(o)})),0===i.length)return{x:0,y:0};var c=0,o=0,u=i.filter((function(t){return t.att===a}));u.forEach((function(t){t.def>c&&(c=t.def)})),u=u.filter((function(t){return t.def===c}));var s=i.filter((function(t){return t.def===r}));return s.forEach((function(t){t.att>o&&(o=t.att)})),s=s.filter((function(t){return t.att===o})),Y(a-r>1?u:s)}}]),n}(b),P=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=t.players,r=0,i=0,c=[];if(n.forEach((function(n){for(var a=function(a){for(var o=function(o){if(0===a&&0===o)return"continue";if(0!==M(t,n.x+a,n.y+o))return"continue";if(c.find((function(t){return t.x===n.x+a&&t.y===n.y+o})))return"continue";var u=Array(e.pCount).fill(0).map((function(r,i){return D(t,n.x+a,n.y+o,i+1,1,0,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,1,1,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,0,1,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,-1,1,M,e.winLength)})),s={x:n.x+a,y:n.y+o,att:u[e.icon-1],def:Math.max.apply(Math,Object(h.a)(u.filter((function(t,n){return n!==e.icon-1}))))};s.att>r&&(r=s.att),s.def>i&&(i=s.def),c.push(s)},u=-1;u<=1;u++)o(u)},o=-1;o<=1;o++)a(o)})),0===c.length)return{x:0,y:0};var o=0,u=0,s=c.filter((function(t){return t.att===r}));s.forEach((function(t){t.def>o&&(o=t.def)})),s=s.filter((function(t){return t.def===o}));var f=c.filter((function(t){return t.def===i}));f.forEach((function(t){t.att>u&&(u=t.att)})),f=f.filter((function(t){return t.att===u}));var l=0,d=0;I(t,this.winLength).forEach((function(t,n){a[n]===e?d=t:l+=t}));var p=l/(this.pCount-1)<d?-1:1;return Y(r-i>p?s:f)}}]),n}(b),R=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=t.players,r=0,i=0,c=[];if(n.forEach((function(n){for(var a=function(a){for(var o=function(o){if(0===a&&0===o)return"continue";if(0!==M(t,n.x+a,n.y+o))return"continue";if(c.find((function(t){return t.x===n.x+a&&t.y===n.y+o})))return"continue";var u=Array(e.pCount).fill(0).map((function(r,i){return D(t,n.x+a,n.y+o,i+1,1,0,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,1,1,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,0,1,M,e.winLength)+D(t,n.x+a,n.y+o,i+1,-1,1,M,e.winLength)})),s={x:n.x+a,y:n.y+o,att:u[e.icon-1],def:Math.max.apply(Math,Object(h.a)(u.filter((function(t,n){return n!==e.icon-1}))))};s.att>r&&(r=s.att),s.def>i&&(i=s.def),c.push(s)},u=-1;u<=1;u++)o(u)},o=-1;o<=1;o++)a(o)})),0===c.length)return{x:0,y:0};var o=0,u=0,s=c.filter((function(t){return t.att===r}));s.forEach((function(t){t.def>o&&(o=t.def)})),s=s.filter((function(t){return t.def===o}));var f=c.filter((function(t){return t.def===i}));f.forEach((function(t){t.att>u&&(u=t.att)})),f=f.filter((function(t){return t.att===u}));var l=0,d=0;I(t,this.winLength).forEach((function(t,n){a[n]===e?d=t:l+=t}));var p=l/(this.pCount-1)<d?1:-1;return Y(r-i>p?s:f)}}]),n}(b),K=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"doTurn",value:function(t){var e=this,n=t.placements,a=[],r=0;return n.forEach((function(n){for(var i=function(i){for(var c=function(c){if(0===i&&0===c)return"continue";if(0!==M(t,n.x+i,n.y+c))return"continue";if(a.find((function(t){return t.x===n.x+i&&t.y===n.y+c})))return"continue";var o=Array(e.pCount).fill(0).map((function(a,r){return D(t,n.x+i,n.y+c,r+1,1,0,M,e.winLength)+D(t,n.x+i,n.y+c,r+1,1,1,M,e.winLength)+D(t,n.x+i,n.y+c,r+1,0,1,M,e.winLength)+D(t,n.x+i,n.y+c,r+1,-1,1,M,e.winLength)})),u={x:n.x+i,y:n.y+c,att:o[e.icon-1],def:Math.max.apply(Math,Object(h.a)(o.filter((function(t,n){return n!==e.icon-1}))))};u.att+u.def>r&&(r=u.att+u.def),a.push(u)},o=-1;o<=1;o++)c(o)},c=-1;c<=1;c++)i(c)})),0===a.length?{x:0,y:0}:Y(a.filter((function(t){return t.att+t.def===r})))}}]),n}(b),H=n(8),V=function(t){return Object(u.jsxs)("div",{id:"limit-dialog",children:["Turns Left: ",t.moveLimit]})},F=function(t){var e=t.playerScores,n=t.iconConfig;return Object(u.jsx)("div",{id:"score-dialog",children:Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:e.map((function(t,e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{style:{width:"40px"},children:r.a.createElement(n.playerIcons[e],{color:n.playerColors[e]})}),Object(u.jsx)("td",{children:t})]},e)}))})})})};function U(t,e){if(null!==t.players[t.turn]){var n=t.players[t.turn].doTurn(t);e(n.x,n.y)}}for(var G=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).boardRef=void 0,a.selectSquare=a.selectSquare.bind(Object(H.a)(a)),a.setSquare=a.setSquare.bind(Object(H.a)(a)),a.handleScroll=a.handleScroll.bind(Object(H.a)(a)),a.handleTouchStart=a.handleTouchStart.bind(Object(H.a)(a)),a.handleTouchMove=a.handleTouchMove.bind(Object(H.a)(a)),a.handleTouchEnd=a.handleTouchEnd.bind(Object(H.a)(a)),a.handleZoom=a.handleZoom.bind(Object(H.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(H.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(H.a)(a)),a.boardRef=r.a.createRef(),a.state={view:{offsetX:0,offsetY:0,spaceSize:50},xLow:0,xHigh:0,yLow:0,yHigh:0,isTouching:!1,touchStart:{x:0,y:0},touchOffset:{x:0,y:0},shiftScroll:!1,ctrlScroll:!1},a}return Object(v.a)(n,[{key:"handleZoom",value:function(t){var e=this.state.view,n=e.offsetX,a=e.offsetY,r=e.spaceSize,i=Math.max(15,Math.min(160,r*t));this.setState({view:{offsetX:n*(i/r),offsetY:a*(i/r),spaceSize:i}})}},{key:"handleScroll",value:function(t){t.preventDefault();var e=this.state,n=e.shiftScroll,a=e.ctrlScroll,r=this.state.view,i=r.offsetX,c=r.offsetY,o=r.spaceSize;if(a)this.handleZoom(Math.exp(t.deltaY/200));else{var u=.25*t.deltaX,s=.25*t.deltaY;this.setState({view:{offsetX:i-(n?s:u),offsetY:c-(n?u:s),spaceSize:o}})}}},{key:"handleTouchMove",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0];this.setState({touchOffset:{x:n.pageX,y:n.pageY}})}},{key:"handleTouchStart",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0];this.setState({isTouching:!0,touchStart:{x:n.pageX,y:n.pageY},touchOffset:{x:n.pageX,y:n.pageY}})}},{key:"handleTouchEnd",value:function(t){t.preventDefault();var e="undefined"===typeof t.originalEvent?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0],a=this.state,r=a.view,i=a.touchStart,c=a.touchOffset,o=r.offsetX,u=r.offsetY,s=r.spaceSize;this.setState({isTouching:!1,view:{offsetX:o+(c.x-i.x),offsetY:u+(c.y-i.y),spaceSize:s}},(function(){Math.pow(i.x-n.pageX,2)+Math.pow(i.y-n.pageY,2)<10&&void 0!==n.target.click&&n.target.click()}))}},{key:"handleKeyDown",value:function(t){switch(t.key){case"Shift":this.setState({shiftScroll:!0});break;case"Control":this.setState({ctrlScroll:!0})}}},{key:"handleKeyUp",value:function(t){switch(t.key){case"Shift":this.setState({shiftScroll:!1});break;case"Control":this.setState({ctrlScroll:!1})}}},{key:"componentDidMount",value:function(){var t,e=this.props.gameState;window.addEventListener("wheel",this.handleScroll,{passive:!1}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),window.addEventListener("touchcancel",this.handleTouchEnd,{passive:!1}),window.addEventListener("keydown",this.handleKeyDown,{passive:!1}),window.addEventListener("keyup",this.handleKeyUp,{passive:!1}),null===(t=this.boardRef.current)||void 0===t||t.addEventListener("selectSquare",this.selectSquare),U(e,this.setSquare)}},{key:"setSquare",value:function(t,e){var n=this,a=this.props.delay;setTimeout((function(){var a;return null===(a=n.boardRef.current)||void 0===a?void 0:a.dispatchEvent(new CustomEvent("selectSquare",{detail:{x:t,y:e}}))}),a)}},{key:"selectSquare",value:function(t){var e,n=this,a=this.props,r=a.broadcast,i=a.gameState,c=a.iconConfig,o=a.winLength,u=t.detail,s=u.x,f=u.y;null===(e=document.getElementById(s+"_"+f))||void 0===e||e.classList.add("space-pressed"),r(q(i,s,f),(function(t){return function(t,e,n,a){var r=t.isLimited,i=t.players,c=t.placements,o=t.turn;if(A(t,n)){var u=w(r?T(t,n).map((function(t,e){return{e:t,i:e}})).sort((function(t,e){return e.e-t.e}))[0].i:o-1,i.length);c.forEach((function(n){var a=document.getElementById(n.x+"_"+n.y);a.classList.add("amoeba-square");var r=[];"none"!==window.getComputedStyle(a).boxShadow&&r.push(window.getComputedStyle(a).boxShadow),0===M(t,n.x,n.y+1)&&r.push("".concat(e.playerColors[u]," 0rem 5rem")),0===M(t,n.x+1,n.y)&&0===M(t,n.x,n.y+1)&&0===M(t,n.x+1,n.y+1)&&r.push("".concat(e.playerColors[u]," 5rem 5rem")),0===M(t,n.x+1,n.y)&&r.push("".concat(e.playerColors[u]," 5rem 0rem")),0===M(t,n.x+1,n.y)&&0===M(t,n.x,n.y-1)&&0===M(t,n.x+1,n.y-1)&&r.push("".concat(e.playerColors[u]," 5rem -5rem")),0===M(t,n.x,n.y-1)&&r.push("".concat(e.playerColors[u]," 0rem -5rem")),0===M(t,n.x-1,n.y)&&0===M(t,n.x,n.y+1)&&0===M(t,n.x-1,n.y+1)&&r.push("".concat(e.playerColors[u]," -5rem 5rem")),0===M(t,n.x-1,n.y)&&r.push("".concat(e.playerColors[u]," -5rem 0rem")),0===M(t,n.x-1,n.y)&&0===M(t,n.x,n.y-1)&&0===M(t,n.x-1,n.y-1)&&r.push("".concat(e.playerColors[u]," -5rem -5rem")),a.style.boxShadow=r.join(", ")}))}else U(t,a)}(t,c,o,n.setSquare)}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.iconConfig,a=e.canMove,r=e.winLength,i=e.gameState,c=e.gameState,o=c.moveLimit,s=c.turn,f=c.map,l=c.isLimited,h=c.players,d=this.state,p=d.view,v=d.view,y=v.offsetX,x=v.offsetY,j=v.spaceSize,b=d.isTouching,m=d.touchOffset,g=d.touchStart,L=d.xLow,S=d.yLow,k=d.xHigh,C=d.yHigh,E=3*j*(k-L+1),M=3*j*(C-S+1),T=I(i,r),N=A(i,r);return Object(u.jsxs)("div",{id:"screen",children:[Object(u.jsx)("div",{id:"player-bar",style:{background:N?n.playerColors[w(l?T.map((function(t,e){return{e:t,i:e}})).sort((function(t,e){return e.e-t.e}))[0].i:s-1,h.length)]:n.playerColors[s]}}),Object(u.jsxs)("div",{id:"zoom-bar",children:[Object(u.jsx)("button",{id:"zoom-in",onClick:function(){return t.handleZoom(1.5)},children:"+"}),Object(u.jsx)("button",{id:"zoom-out",onClick:function(){return t.handleZoom(2/3)},children:"-"})]}),l&&Object(u.jsx)(V,{moveLimit:o}),l&&Object(u.jsx)(F,{playerScores:T,iconConfig:n}),Object(u.jsx)("button",{id:"reset-button",onClick:function(){return window.location.reload()},children:"Reset Game"}),Object(u.jsx)("div",{className:"board",ref:this.boardRef,children:Object(u.jsx)("div",{className:"chunk-container",style:{position:"absolute",width:"".concat(E,"px"),height:"".concat(M,"px"),marginTop:"".concat(-M/2+x+(b?m.y-g.y:0),"px"),marginLeft:"".concat(-E/2+y+(b?m.x-g.x:0),"px")},children:Object.values(f).map((function(e){return Object(u.jsx)(O,{iconConfig:n,posX:e.x-L,posY:e.y-S,chunkX:e.x,chunkY:e.y,chunkData:e.chunkData,selectSquare:t.selectSquare,win:N,canPlayerMove:a,view:p},e.x+"_"+e.y)}))})})]})}}]),n}(r.a.Component),J=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(t){var a;Object(p.a)(this,n),a=e.call(this,t);var r=t.winLength,i=t.limit,c=t.AINames,o=t.AISelectOptions,u=c.map((function(t,e){return"player"===t?null:new o[t](r,e+1,c.length)}));a.state={turn:0,placements:[],map:{},moveLimit:i>0?i:0,isLimited:i>0,players:u};for(var s=-1;s<=1;s++)for(var f=-1;f<=1;f++)a.state=Object(d.a)(Object(d.a)({},a.state),N(a.state,s,f));return a}return Object(v.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.iconConfig,a=e.delay,r=e.winLength,i=this.state.players;return Object(u.jsx)(G,{iconConfig:n,gameState:this.state,broadcast:function(e,n){t.setState(e),n(e)},canMove:null===i[this.state.turn],delay:a,winLength:r})}}]),n}(r.a.Component),W={fuzzy:_,elk:z,elkatt:B,elkdef:Z,elksurf:P,elktimid:R,attanddef:K},Q=new URLSearchParams(window.location.search),$=Q.get("game"),tt=Q.get("win")?parseInt(Q.get("win"),10):5,et=Q.get("count")?parseInt(Q.get("count"),10):2,nt=Q.get("limit")?parseInt(Q.get("limit"),10):0,at=Q.get("delay")?parseInt(Q.get("delay"),10):0,rt=[],it=0;it<et;it++)rt.push(Q.get("p".concat(it+1))||"player");var ct={playerColors:["#5588ff","#ff3344","#33ff44","#ffcc33"],playerIcons:[function(t){return Object(u.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(u.jsx)("path",{fill:t.color,d:"M500,0C223.86,0,0,223.86,0,500s223.86,500,500,500,500-223.86,500-500S776.14,0,500,0Zm0,800c-165.69,0-300-134.31-300-300S334.31,200,500,200,800,334.31,800,500,665.69,800,500,800Z"})})},function(t){return Object(u.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(u.jsx)("polygon",{fill:t.color,points:"1000 858.58 641.42 500 1000 141.42 858.58 0 500 358.58 141.42 0 0 141.42 358.58 500 0 858.58 141.42 1000 500 641.42 858.58 1000 1000 858.58"})})},function(t){return Object(u.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(u.jsx)("path",{fill:t.color,d:"M500,0,0,500l500,500,500-500Zm0,717.16L282.84,500,500,282.84,717.16,500Z",transform:"translate(0 0)"})})},function(t){return Object(u.jsx)("svg",{className:"player-icon",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:Object(u.jsx)("path",{fill:t.color,d:"M0,0V1000H1000V0ZM800,800H200V200H800Z"})})}]};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(l,{theme:Q.get("theme")||"default",children:$?Object(u.jsx)(J,{winLength:tt,limit:nt,delay:at,AINames:rt,iconConfig:ct,AISelectOptions:W}):Object(u.jsx)(j,{winLength:tt,limit:nt,delay:at,AINames:rt,iconConfig:ct,AISelectOptions:W})})}),document.getElementById("root")),o()}},[[18,1,2]]]);
//# sourceMappingURL=main.89c72079.chunk.js.map