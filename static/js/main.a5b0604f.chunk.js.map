{"version":3,"sources":["reportWebVitals.ts","ThemeSelector.tsx","Menu.tsx","Space.tsx","Chunk.tsx","utils.tsx","GameState.tsx","Board.tsx","AI.tsx","ais/utils.tsx","ais/Elk.tsx","ais/ElkAtt.tsx","ais/ElkDef.tsx","ais/Fuzzy.tsx","App.tsx","index.tsx","assets/CircleIcon.tsx","assets/CrossIcon.tsx","assets/DiamondIcon.tsx","assets/SquareIcon.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","DefaultTheme","React","lazy","Win98Theme","ThemeSelector","props","Suspense","fallback","theme","children","Menu","state","this","winLength","limit","delay","AINames","iconConfig","removeItem","index","newAINames","splice","setState","changeAI","value","canDelete","length","id","type","defaultValue","onChange","e","parseInt","target","map","AIName","className","createElement","playerIcons","color","playerColors","selected","onClick","PlayerItem","url","i","window","location","assign","Component","Space","x","y","win","canPlayerMove","view","spaceSize","style","position","width","height","left","top","Chunk","chunkData","posX","posY","chunkX","chunkY","selectSquare","col","cell","detail","flatten","d","fib","n","horizontalCount","gameState","v","ps","getValue","push","verticalCount","diagonalUp","diagonalDown","chunk","Math","floor","undefined","calculateLimitScore","playerCount","placements","matches","forEach","placement","flag","removes","p","a","b","j","sharePoint","old","playerScores","m","filter","score","checkWin","isLimited","moveLimit","check","squares","s","document","getElementById","classList","add","addChunk","turn","generateBorderChunks","Limit","ScoreScreen","Board","boardRef","bind","postMove","handleScroll","handleTouchStart","handleTouchMove","handleTouchEnd","handleZoom","handleKeyDown","handleKeyUp","createRef","offsetX","offsetY","xLow","xHigh","yLow","yHigh","isTouching","touchStart","touchOffset","shiftScroll","ctrlScroll","newSpaceSize","max","min","preventDefault","exp","deltaY","deltaX","evt","originalEvent","touch","touches","changedTouches","pageX","pageY","pow","click","key","addEventListener","passive","current","doLocalTurn","winner","sort","element","shadow","getComputedStyle","boxShadow","join","broadcast","canMove","background","reload","ref","marginTop","marginLeft","Object","values","AI","icon","pCount","_gameState","Error","countLine","dx","dy","l","nx","ny","nx2","ny2","Elk","highAtt","highDef","heatMap","h","o","att","def","Array","fill","_","maxDef","maxAtt","attMap","defMap","random","ElkAtt","ElkDef","Fuzzy","turnDelay","AIs","doTurn","setTimeout","dispatchEvent","CustomEvent","App","gs","callback","params","URLSearchParams","search","openGame","get","data-name","xmlns","viewBox","points","transform","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a5b0604f.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\n\r\n/**\r\n * The theme components only imports it's theme CSS-file. These components are lazy\r\n * loaded, to enable \"code splitting\" (in order to avoid the themes being bundled together)\r\n */\r\nconst DefaultTheme = React.lazy(() => import('./styles/App'));\r\nconst Win98Theme = React.lazy(() => import('./styles/Win98'));\r\n\r\nconst ThemeSelector = (props: { theme: string; children: any; }) => (\r\n  <>\r\n    {/* Conditionally render theme, based on the current client context */}\r\n    <React.Suspense fallback={() => <div />}>\r\n      {props.theme === 'default' && <DefaultTheme />}\r\n      {props.theme === 'win98' && <Win98Theme />}\r\n    </React.Suspense>\r\n    {/* Render children immediately! */}\r\n    {props.children}\r\n  </>\r\n);\r\n\r\nexport default ThemeSelector;\r\n","import React from \"react\";\r\nimport { GameProps } from \"./GameProps\";\r\nimport { IconConfig } from \"./IconConfig\";\r\n\r\ntype PlayerItemProps = {\r\n\tAIName: string,\r\n\tindex: number,\r\n\ticonConfig: IconConfig,\r\n\tremoveItem: Function,\r\n\tchangeAI: Function,\r\n\tcanDelete: boolean\r\n};\r\n\r\nfunction PlayerItem(props: PlayerItemProps) {\r\n\tconst { AIName, index, iconConfig, removeItem, changeAI, canDelete } = props;\r\n\treturn (\r\n\t\t<div className=\"menu-playerItem\">\r\n\t\t\t<div className=\"menu-playerItem-icon\">\r\n\t\t\t\t{React.createElement(iconConfig.playerIcons[index], { color: iconConfig.playerColors[index] })}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"menu-playerItem-body\">\r\n\t\t\t\t<div className=\"menu-playerItem-AISelect\">\r\n\t\t\t\t\t<span>Type:</span>\r\n\t\t\t\t\t<select id={`p${index + 1}`} onChange={(e) => changeAI(index, e.target.value)}>\r\n\t\t\t\t\t\t<option selected={AIName === 'player' ? true : false} value=\"player\">No AI</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'fuzzy' ? true : false} value=\"fuzzy\">fuzzy</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elk' ? true : false} value=\"elk\">elk</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elkatt' ? true : false} value=\"elkatt\">elkatt</option>\r\n\t\t\t\t\t\t<option selected={AIName === 'elkdef' ? true : false} value=\"elkdef\">elkdef</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{canDelete && <button className=\"menu-playerItem-remove\" onClick={() => removeItem(index)}>X</button>}\r\n\t\t</div>)\r\n}\r\n\r\nexport class Menu extends React.Component<GameProps, GameProps> {\r\n\tconstructor(props: GameProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props;\r\n\t}\r\n\trender() {\r\n\t\tconst { winLength, limit, delay, AINames, iconConfig } = this.state\r\n\t\tconst removeItem = (index: number) => {\r\n\t\t\tlet newAINames = [...this.state.AINames];\r\n\t\t\tnewAINames.splice(index, 1);\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tAINames: newAINames\r\n\t\t\t})\r\n\t\t};\r\n\t\tconst playGame = () => {\r\n\t\t\tlet url = `win=${winLength}&limit=${limit}&count=${AINames.length}&delay=${delay}`;\r\n\t\t\tfor (let i = 0; i < AINames.length; i++) {\r\n\t\t\t\tif (AINames[i] !== 'player') {\r\n\t\t\t\t\turl += `&p${i + 1}=${AINames[i]}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twindow.location.assign(`https://nallantli.github.io/amoeba/?game=1&${url}`);\r\n\t\t};\r\n\t\tconst changeAI = (index: number, value: string) => {\r\n\t\t\tlet newAINames = [...this.state.AINames];\r\n\t\t\tnewAINames[index] = value;\r\n\t\t\tthis.setState({\r\n\t\t\t\t...this.state,\r\n\t\t\t\tAINames: newAINames\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst canDelete = (AINames.length > 1);\r\n\t\treturn (\r\n\t\t\t<div id=\"menu\">\r\n\t\t\t\t<div id=\"menu-winLength\">\r\n\t\t\t\t\t<span>Length to Win:</span>\r\n\t\t\t\t\t<input id=\"input-winLength\" type=\"text\" defaultValue={winLength} onChange={(e) => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\twinLength: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}}></input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"menu-limit\">\r\n\t\t\t\t\t<span>Maximum Amount of Rounds:</span>\r\n\t\t\t\t\t<input id=\"input-limit\" type=\"text\" defaultValue={limit} onChange={(e) => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\tlimit: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}}></input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"menu-delay\">\r\n\t\t\t\t\t<span>Millisecond Delay Between Moves:</span>\r\n\t\t\t\t\t<input id=\"input-delay\" type=\"text\" defaultValue={delay} onChange={(e) => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\tdelay: parseInt(e.target.value, 10)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}}></input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"menu-players\">\r\n\t\t\t\t\t{AINames.map((AIName, index) => PlayerItem({\r\n\t\t\t\t\t\tAIName,\r\n\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\ticonConfig,\r\n\t\t\t\t\t\tremoveItem,\r\n\t\t\t\t\t\tchangeAI,\r\n\t\t\t\t\t\tcanDelete\r\n\t\t\t\t\t}))}\r\n\t\t\t\t</div>\r\n\t\t\t\t{AINames.length < 4 && <button id=\"menu-addPlayer\" onClick={() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\tAINames: [\r\n\t\t\t\t\t\t\t...AINames,\r\n\t\t\t\t\t\t\t\"player\"\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t}}>Add Player</button>}\r\n\t\t\t\t<button id=\"play-game\" onClick={playGame}>\r\n\t\t\t\t\tPlay!\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React from \"react\";\r\nimport { IconConfig } from \"./IconConfig\";\r\n\r\ntype SpaceProps = {\r\n\tx: number;\r\n\ty: number;\r\n\tid: string;\r\n\tvalue: number;\r\n\twin: boolean;\r\n\tcanPlayerMove: boolean;\r\n\tonClick: (e: any) => void;\r\n\tview: { spaceSize: number };\r\n\ticonConfig: IconConfig;\r\n};\r\n\r\nexport const Space = (props: SpaceProps) => {\r\n\tconst { x, y, id, value, win, canPlayerMove, onClick, view, iconConfig } = props;\r\n\tconst { spaceSize } = view;\r\n\treturn (<button\r\n\t\tid={id}\r\n\t\tonClick={value === 0 && !win && canPlayerMove ? onClick : () => { }}\r\n\t\tclassName=\"space\"\r\n\t\tstyle={{\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: `${spaceSize}px`,\r\n\t\t\theight: `${spaceSize}px`,\r\n\t\t\tleft: `${x * spaceSize}px`,\r\n\t\t\ttop: `${y * spaceSize}px`\r\n\t\t}}\r\n\t>\r\n\t\t{value > 0 && React.createElement(iconConfig.playerIcons[value - 1], { color: iconConfig.playerColors[value - 1] })}\r\n\t</button>);\r\n}","import { IconConfig } from \"./IconConfig\";\r\nimport { Space } from \"./Space\";\r\n\r\nexport const chunkSize = 3;\r\n\r\nexport const Chunk = (props: {\r\n\tchunkX: number;\r\n\tchunkY: number;\r\n\tselectSquare: (e: any) => void;\r\n\tchunkData: number[][];\r\n\tposX: number;\r\n\tposY: number;\r\n\twin: boolean;\r\n\tcanPlayerMove: boolean;\r\n\tview: { spaceSize: number; };\r\n\ticonConfig: IconConfig;\r\n}) => {\r\n\tconst { chunkData, posX, posY, chunkX, chunkY, win, canPlayerMove, view, selectSquare, iconConfig } = props;\r\n\tconst { spaceSize } = view;\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"chunk\"\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\twidth: `${chunkSize * spaceSize}px`,\r\n\t\t\t\theight: `${chunkSize * spaceSize}px`,\r\n\t\t\t\tleft: `${posX * chunkSize * spaceSize}px`,\r\n\t\t\t\ttop: `${posY * chunkSize * spaceSize}px`\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{chunkData.map((col, x) => {\r\n\t\t\t\treturn col.map((cell, y) =>\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tkey={`${x + chunkX * chunkSize}_${y + chunkY * chunkSize}`}\r\n\t\t\t\t\t\tid={`${x + chunkX * chunkSize}_${y + chunkY * chunkSize}`}\r\n\t\t\t\t\t\tvalue={cell}\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tonClick={() => selectSquare({ detail: { x: chunkX * chunkSize + x, y: chunkY * chunkSize + y } })}\r\n\t\t\t\t\t\twin={win}\r\n\t\t\t\t\t\tcanPlayerMove={canPlayerMove}\r\n\t\t\t\t\t\tview={view}\r\n\t\t\t\t\t\ticonConfig={iconConfig}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}","export function flatten(x: number, d: number): number {\r\n\twhile (x < 0)\r\n\t\tx += d;\r\n\treturn x % d;\r\n}\r\n\r\n/* carter code */\r\nexport function fib(n: number): number {\r\n\tif (n === 1 || n === 0)\r\n\t\treturn n;\r\n\telse\r\n\t\treturn fib(n - 2) + fib(n - 1);\r\n}","import { AI } from \"./AI\";\r\nimport { chunkSize } from \"./Chunk\";\r\nimport { fib, flatten } from \"./utils\";\r\n\r\nexport type GameState = {\r\n\tmap: { [key: string]: { x: number, y: number, chunkData: number[][] } };\r\n\tplacements: { x: number, y: number, v: number }[];\r\n\tplayerCount: number;\r\n\twinLength: number;\r\n\tmoveLimit: number;\r\n\tisLimited: boolean;\r\n\tturn: number;\r\n\tdelay: number;\r\n\tAIs: (AI | undefined)[];\r\n};\r\n\r\nfunction horizontalCount(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 0 };\r\n}\r\n\r\nfunction verticalCount(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty++;\r\n\t}\r\n\treturn { ps, type: 1 };\r\n}\r\n\r\nfunction diagonalUp(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty++;\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 2 };\r\n}\r\n\r\nfunction diagonalDown(gameState: GameState, x: number, y: number, v: number) {\r\n\tlet ps = [];\r\n\twhile (getValue(gameState, x, y) === v) {\r\n\t\tps.push({ x, y });\r\n\t\ty--;\r\n\t\tx++;\r\n\t}\r\n\treturn { ps, type: 3 };\r\n}\r\n\r\nexport function getValue(gameState: GameState, x: number, y: number) {\r\n\tconst { map } = gameState;\r\n\tconst chunk = map[Math.floor(x / chunkSize) + '_' + Math.floor(y / chunkSize)];\r\n\tif (chunk === undefined) {\r\n\t\treturn 0;\r\n\t}\r\n\treturn chunk.chunkData[flatten(x, chunkSize)][flatten(y, chunkSize)];\r\n}\r\n\r\nfunction sharePoint(a: { x: number, y: number }[], b: { x: number, y: number }[]) {\r\n\tfor (let i = 0; i < a.length; i++) {\r\n\t\tfor (let j = 0; j < b.length; j++) {\r\n\t\t\tif (a[i].x === b[j].x && a[i].y === b[j].y)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport function calculateLimitScore(gameState: GameState) {\r\n\tconst { playerCount, winLength, placements } = gameState;\r\n\tlet matches: { type: number, ps: { x: number, y: number }[], old?: boolean }[][] = [];\r\n\tfor (let i = 0; i < playerCount; i++) {\r\n\t\tmatches.push([]);\r\n\t}\r\n\tplacements.forEach((placement: { x: number, y: number, v: number }) => {\r\n\t\t[\r\n\t\t\thorizontalCount(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tverticalCount(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tdiagonalUp(gameState, placement.x, placement.y, placement.v),\r\n\t\t\tdiagonalDown(gameState, placement.x, placement.y, placement.v)\r\n\t\t].forEach(e => {\r\n\t\t\tif (e.ps.length < winLength) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet flag = false;\r\n\t\t\tlet removes: number[] = [];\r\n\t\t\tmatches[placement.v - 1].forEach((p: { type: number, ps: { x: number, y: number }[] }, i: number) => {\r\n\t\t\t\tif (p.type === e.type && sharePoint(p.ps, e.ps)) {\r\n\t\t\t\t\tif (p.ps.length < e.ps.length) {\r\n\t\t\t\t\t\tremoves.push(i);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tremoves.forEach(i => matches[placement.v - 1][i].old = true);\r\n\t\t\tif (!flag) {\r\n\t\t\t\tmatches[placement.v - 1].push(e);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tlet playerScores: number[] = [];\r\n\tmatches.map(m => m.filter(e => e.old === undefined));\r\n\tmatches.forEach(e => {\r\n\t\tlet score = 0;\r\n\t\te.forEach(p => {\r\n\t\t\tscore += fib(p.ps.length - winLength + 2);\r\n\t\t});\r\n\t\tplayerScores.push(score);\r\n\t});\r\n\treturn playerScores;\r\n}\r\n\r\nexport function checkWin(gameState: GameState): boolean {\r\n\tif (gameState.placements.length === 0) {\r\n\t\treturn false;\r\n\t}\r\n\tconst { x, y } = gameState.placements[gameState.placements.length - 1];\r\n\tconst { winLength, isLimited, moveLimit } = gameState;\r\n\tif (isLimited) {\r\n\t\tif (moveLimit === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else {\r\n\t\tconst check = getValue(gameState, x, y);\r\n\t\tif (check === 0)\r\n\t\t\treturn false;\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + y);\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tconst s = getValue(gameState, x, y - i + j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push(x + \"_\" + (y - i + j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y - i + j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + (y - i + j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < winLength; i++) {\r\n\t\t\tlet squares = [];\r\n\t\t\tfor (let j = 0; j < winLength; j++) {\r\n\t\t\t\tlet s = getValue(gameState, x - i + j, y + i - j);\r\n\t\t\t\tif (s === undefined)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (s !== check)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tsquares.push((x - i + j) + \"_\" + (y + i - j));\r\n\t\t\t}\r\n\t\t\tif (squares.length === winLength) {\r\n\t\t\t\tsquares.forEach((e) => document.getElementById(e)?.classList.add(\"win-square\"));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport function addChunk(gameState: GameState, x: number, y: number): GameState {\r\n\tconst { map } = gameState;\r\n\tif (map[x + '_' + y] !== undefined) {\r\n\t\treturn gameState;\r\n\t}\r\n\tlet chunkData: number[][] = [];\r\n\tfor (let i = 0; i < chunkSize; i++) {\r\n\t\tchunkData[i] = [];\r\n\t\tfor (let j = 0; j < chunkSize; j++) {\r\n\t\t\tchunkData[i][j] = 0;\r\n\t\t}\r\n\t}\r\n\treturn gameState = {\r\n\t\t...gameState,\r\n\t\tmap: {\r\n\t\t\t...map,\r\n\t\t\t[`${x}_${y}`]: {\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\tchunkData\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction generateBorderChunks(gameState: GameState, chunkX: number, chunkY: number): GameState {\r\n\tfor (let i = chunkX - 1; i <= chunkX + 1; i++) {\r\n\t\tfor (let j = chunkY - 1; j <= chunkY + 1; j++) {\r\n\t\t\tgameState = { ...gameState, ...addChunk(gameState, i, j) };\r\n\t\t}\r\n\t}\r\n\treturn gameState;\r\n}\r\n\r\nexport function selectSquare(gameState: GameState, x: number, y: number): GameState {\r\n\tconst { turn, moveLimit, placements, playerCount } = gameState;\r\n\tconst chunkX = Math.floor(x / chunkSize);\r\n\tconst chunkY = Math.floor(y / chunkSize);\r\n\tconst v = turn + 1;\r\n\tconst chunk = gameState.map[chunkX + '_' + chunkY];\r\n\tif (chunk === undefined) {\r\n\t\treturn selectSquare(\r\n\t\t\taddChunk(\r\n\t\t\t\tgameState,\r\n\t\t\t\tchunkX,\r\n\t\t\t\tchunkY),\r\n\t\t\tx,\r\n\t\t\ty);\r\n\t}\r\n\tchunk.chunkData[flatten(x, chunkSize)][flatten(y, chunkSize)] = v;\r\n\tgameState = generateBorderChunks(gameState, chunkX, chunkY);\r\n\treturn gameState = {\r\n\t\t...gameState,\r\n\t\tmap: {\r\n\t\t\t...gameState.map,\r\n\t\t\t[chunkX + '_' + chunkY]: chunk\r\n\t\t},\r\n\t\tplacements: [...placements, { x, y, v }],\r\n\t\tturn: (turn + 1) % playerCount,\r\n\t\tmoveLimit: moveLimit - (turn === playerCount - 1 ? 1 : 0)\r\n\t};\r\n}","import React from 'react';\r\nimport { Chunk, chunkSize } from './Chunk';\r\nimport { calculateLimitScore, checkWin, GameState, getValue, selectSquare } from './GameState';\r\nimport { IconConfig } from './IconConfig';\r\nimport { flatten } from './utils';\r\n\r\nconst Limit = (props: { moveLimit: number }) => {\r\n\treturn (<div id=\"limit-dialog\">Turns Left: {props.moveLimit}</div>);\r\n}\r\n\r\nconst ScoreScreen = (props: { playerScores: number[], iconConfig: IconConfig }) => {\r\n\tconst { playerScores, iconConfig } = props;\r\n\treturn (\r\n\t\t<div id=\"score-dialog\">\r\n\t\t\t<table>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{playerScores.map((score, i) => <tr key={i}><td style={{ width: \"40px\" }}>{React.createElement(iconConfig.playerIcons[i], { color: iconConfig.playerColors[i] })}</td><td>{score}</td></tr>)}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\ntype BoardProps = {\r\n\tgameState: GameState;\r\n\ticonConfig: IconConfig;\r\n\tbroadcast: (gameState: GameState, callback: (gameState: GameState) => void) => void;\r\n\tdoLocalTurn: (gameState: GameState, boardRef: any, turnDelay: number) => void;\r\n\tcanMove: boolean;\r\n};\r\n\r\ntype BoardState = {\r\n\tview: {\r\n\t\toffsetX: number;\r\n\t\toffsetY: number;\r\n\t\tspaceSize: number;\r\n\t};\r\n\txLow: number;\r\n\txHigh: number;\r\n\tyLow: number;\r\n\tyHigh: number;\r\n\tisTouching: boolean;\r\n\ttouchStart: { x: number, y: number };\r\n\ttouchOffset: { x: number, y: number };\r\n\tshiftScroll: boolean;\r\n\tctrlScroll: boolean;\r\n};\r\n\r\nexport class Board extends React.Component<BoardProps, BoardState> {\r\n\tboardRef: React.RefObject<HTMLDivElement>;\r\n\tconstructor(props: BoardProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.selectSquare = this.selectSquare.bind(this);\r\n\t\tthis.postMove = this.postMove.bind(this);\r\n\t\tthis.handleScroll = this.handleScroll.bind(this);\r\n\t\tthis.handleTouchStart = this.handleTouchStart.bind(this);\r\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\r\n\t\tthis.handleTouchEnd = this.handleTouchEnd.bind(this);\r\n\t\tthis.handleZoom = this.handleZoom.bind(this);\r\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\r\n\t\tthis.handleKeyUp = this.handleKeyUp.bind(this);\r\n\r\n\t\tthis.boardRef = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\tspaceSize: 50\r\n\t\t\t},\r\n\t\t\txLow: 0,\r\n\t\t\txHigh: 0,\r\n\t\t\tyLow: 0,\r\n\t\t\tyHigh: 0,\r\n\t\t\tisTouching: false,\r\n\t\t\ttouchStart: { x: 0, y: 0 },\r\n\t\t\ttouchOffset: { x: 0, y: 0 },\r\n\t\t\tshiftScroll: false,\r\n\t\t\tctrlScroll: false\r\n\t\t}\r\n\t}\r\n\thandleZoom(v: number) {\r\n\t\tconst { offsetX, offsetY, spaceSize } = this.state.view;\r\n\t\tconst newSpaceSize = Math.max(15, Math.min(160, spaceSize * v));\r\n\t\tthis.setState({\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: offsetX * (newSpaceSize / spaceSize),\r\n\t\t\t\toffsetY: offsetY * (newSpaceSize / spaceSize),\r\n\t\t\t\tspaceSize: newSpaceSize\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\thandleScroll(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst { shiftScroll, ctrlScroll } = this.state;\r\n\t\tconst { offsetX, offsetY, spaceSize } = this.state.view;\r\n\t\tif (ctrlScroll) {\r\n\t\t\tthis.handleZoom(Math.exp(e.deltaY / 200));\r\n\t\t} else {\r\n\t\t\tconst deltaX = e.deltaX * 0.25;\r\n\t\t\tconst deltaY = e.deltaY * 0.25;\r\n\t\t\tthis.setState({\r\n\t\t\t\tview: {\r\n\t\t\t\t\toffsetX: offsetX - (shiftScroll ? deltaY : deltaX),\r\n\t\t\t\t\toffsetY: offsetY - (shiftScroll ? deltaX : deltaY),\r\n\t\t\t\t\tspaceSize: spaceSize\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTouchMove(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tthis.setState({\r\n\t\t\ttouchOffset: { x: touch.pageX, y: touch.pageY }\r\n\t\t});\r\n\t}\r\n\thandleTouchStart(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tthis.setState({\r\n\t\t\tisTouching: true,\r\n\t\t\ttouchStart: { x: touch.pageX, y: touch.pageY },\r\n\t\t\ttouchOffset: { x: touch.pageX, y: touch.pageY }\r\n\t\t});\r\n\t}\r\n\thandleTouchEnd(e: any) {\r\n\t\te.preventDefault();\r\n\t\tconst evt = (typeof e.originalEvent === 'undefined') ? e : e.originalEvent;\r\n\t\tconst touch = evt.touches[0] || evt.changedTouches[0];\r\n\t\tconst { view, touchStart, touchOffset } = this.state;\r\n\t\tconst { offsetX, offsetY, spaceSize } = view;\r\n\t\tthis.setState({\r\n\t\t\tisTouching: false,\r\n\t\t\tview: {\r\n\t\t\t\toffsetX: offsetX + (touchOffset.x - touchStart.x),\r\n\t\t\t\toffsetY: offsetY + (touchOffset.y - touchStart.y),\r\n\t\t\t\tspaceSize: spaceSize\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tif (Math.pow(touchStart.x - touch.pageX, 2) + Math.pow(touchStart.y - touch.pageY, 2) < 10) {\r\n\t\t\t\tif (touch.target.click !== undefined) {\r\n\t\t\t\t\ttouch.target.click();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\thandleKeyDown(e: any) {\r\n\t\tswitch (e.key) {\r\n\t\t\tcase 'Shift':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tshiftScroll: true\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Control':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tctrlScroll: true\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\thandleKeyUp(e: any) {\r\n\t\tswitch (e.key) {\r\n\t\t\tcase 'Shift':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tshiftScroll: false\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Control':\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tctrlScroll: false\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('wheel', this.handleScroll, { passive: false });\r\n\t\twindow.addEventListener('touchstart', this.handleTouchStart, { passive: false });\r\n\t\twindow.addEventListener('touchmove', this.handleTouchMove, { passive: false });\r\n\t\twindow.addEventListener('touchend', this.handleTouchEnd, { passive: false });\r\n\t\twindow.addEventListener('touchcancel', this.handleTouchEnd, { passive: false });\r\n\t\twindow.addEventListener('keydown', this.handleKeyDown, { passive: false });\r\n\t\twindow.addEventListener('keyup', this.handleKeyUp, { passive: false });\r\n\t\tthis.boardRef.current?.addEventListener('selectSquare', this.selectSquare);\r\n\t\tthis.props.doLocalTurn(this.props.gameState, this.boardRef, this.props.gameState.delay);\r\n\t}\r\n\tpostMove(gameState: GameState) {\r\n\t\tconst { iconConfig } = this.props;\r\n\t\tconst { isLimited, playerCount, placements, turn } = gameState;\r\n\t\tif (checkWin(gameState)) {\r\n\t\t\tconst winner =\r\n\t\t\t\tflatten(\r\n\t\t\t\t\t(isLimited ?\r\n\t\t\t\t\t\tcalculateLimitScore(gameState).map((e, i) => ({ e, i })).sort((a, b) => b.e - a.e)[0].i\r\n\t\t\t\t\t\t: turn - 1),\r\n\t\t\t\t\tplayerCount\r\n\t\t\t\t);\r\n\t\t\tplacements.forEach(placement => {\r\n\t\t\t\tlet element = document.getElementById(placement.x + \"_\" + placement.y) as HTMLElement;\r\n\t\t\t\telement.classList.add(\"amoeba-square\");\r\n\t\t\t\tlet shadow = [];\r\n\t\t\t\tif (window.getComputedStyle(element).boxShadow !== \"none\") {\r\n\t\t\t\t\tshadow.push(window.getComputedStyle(element).boxShadow);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 0rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y + 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x + 1, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem 0rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x + 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y - 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x + 1, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 5rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} 0rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y + 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x - 1, placement.y + 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem 5rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem 0rem`);\r\n\t\t\t\t}\r\n\t\t\t\tif (getValue(gameState, placement.x - 1, placement.y) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x, placement.y - 1) === 0\r\n\t\t\t\t\t&& getValue(gameState, placement.x - 1, placement.y - 1) === 0) {\r\n\t\t\t\t\tshadow.push(`${iconConfig.playerColors[winner]} -5rem -5rem`);\r\n\t\t\t\t}\r\n\t\t\t\telement.style.boxShadow = shadow.join(\", \");\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.props.doLocalTurn(gameState, this.boardRef, gameState.delay);\r\n\t\t}\r\n\t}\r\n\tselectSquare(e: any) {\r\n\t\tconst { broadcast, gameState } = this.props;\r\n\t\tconst { x, y } = e.detail;\r\n\t\tdocument.getElementById(x + \"_\" + y)?.classList.add(\"space-pressed\");\r\n\t\tbroadcast(selectSquare(gameState, x, y), this.postMove);\r\n\t}\r\n\trender() {\r\n\t\tconst { iconConfig, canMove, gameState,\r\n\t\t\tgameState: { moveLimit, turn, map, isLimited, playerCount } } = this.props;\r\n\t\tconst { view,\r\n\t\t\tview: { offsetX, offsetY, spaceSize },\r\n\t\t\tisTouching, touchOffset, touchStart,\r\n\t\t\txLow, yLow, xHigh, yHigh\r\n\t\t} = this.state;\r\n\t\tconst width = spaceSize * chunkSize * (xHigh - xLow + 1);\r\n\t\tconst height = spaceSize * chunkSize * (yHigh - yLow + 1);\r\n\t\tconst playerScores = isLimited ? calculateLimitScore(gameState) : [];\r\n\t\tconst win = checkWin(gameState);\r\n\t\treturn (\r\n\t\t\t<div id=\"screen\">\r\n\t\t\t\t<div id=\"player-bar\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: (win ?\r\n\t\t\t\t\t\t\ticonConfig.playerColors[flatten((isLimited ?\r\n\t\t\t\t\t\t\t\tplayerScores.map((e, i) => ({ e, i })).sort((a, b) => b.e - a.e)[0].i\r\n\t\t\t\t\t\t\t\t: turn - 1), playerCount)]\r\n\t\t\t\t\t\t\t: iconConfig.playerColors[turn])\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<div id=\"zoom-bar\">\r\n\t\t\t\t\t<button id=\"zoom-in\" onClick={() => this.handleZoom(3 / 2)}>+</button>\r\n\t\t\t\t\t<button id=\"zoom-out\" onClick={() => this.handleZoom(2 / 3)}>-</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{isLimited && <Limit moveLimit={moveLimit} />}\r\n\t\t\t\t{isLimited && <ScoreScreen playerScores={playerScores} iconConfig={iconConfig} />}\r\n\t\t\t\t<button id=\"reset-button\" onClick={() => window.location.reload()}>Reset Game</button>\r\n\t\t\t\t<div className=\"board\" ref={this.boardRef}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"chunk-container\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\twidth: `${width}px`,\r\n\t\t\t\t\t\t\theight: `${height}px`,\r\n\t\t\t\t\t\t\tmarginTop: `${-height / 2 + offsetY + (isTouching ? (touchOffset.y - touchStart.y) : 0)}px`,\r\n\t\t\t\t\t\t\tmarginLeft: `${-width / 2 + offsetX + (isTouching ? (touchOffset.x - touchStart.x) : 0)}px`\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Object.values(map).map(value =>\r\n\t\t\t\t\t\t\t<Chunk\r\n\t\t\t\t\t\t\t\ticonConfig={iconConfig}\r\n\t\t\t\t\t\t\t\tkey={value.x + '_' + value.y}\r\n\t\t\t\t\t\t\t\tposX={value.x - xLow}\r\n\t\t\t\t\t\t\t\tposY={value.y - yLow}\r\n\t\t\t\t\t\t\t\tchunkX={value.x}\r\n\t\t\t\t\t\t\t\tchunkY={value.y}\r\n\t\t\t\t\t\t\t\tchunkData={value.chunkData}\r\n\t\t\t\t\t\t\t\tselectSquare={this.selectSquare}\r\n\t\t\t\t\t\t\t\twin={win}\r\n\t\t\t\t\t\t\t\tcanPlayerMove={canMove}\r\n\t\t\t\t\t\t\t\tview={view}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import { GameState } from \"./GameState\";\r\n\r\nexport class AI {\r\n\twinLength: number;\r\n\ticon: number;\r\n\tpCount: number;\r\n\tconstructor(\r\n\t\twinLength: number,\r\n\t\ticon: number,\r\n\t\tpCount: number\r\n\t) {\r\n\t\tthis.winLength = winLength;\r\n\t\tthis.icon = icon;\r\n\t\tthis.pCount = pCount;\r\n\t}\r\n\tdoTurn(_gameState: GameState): { x: number, y: number } {\r\n\t\tthrow new Error(\"Method not implemented.\");\r\n\t}\r\n}","import { GameState } from \"../GameState\";\r\n\r\nexport function countLine(gameState: GameState, x: number, y: number, v: number, dx: number, dy: number, getValue: (gameState: GameState, x: number, y: number) => number, winLength: number): number {\r\n\tlet l = 0;\r\n\tlet i = -1;\r\n\twhile (getValue(gameState, x + i * dx, y + i * dy) === v) {\r\n\t\tlet d = 0;\r\n\t\tlet nx = x + i * dx;\r\n\t\tlet ny = y + i * dy;\r\n\t\twhile (getValue(gameState, nx, ny) === v || (nx === x && ny === y)) {\r\n\t\t\td++;\r\n\t\t\tnx += dx;\r\n\t\t\tny += dy;\r\n\t\t}\r\n\t\tif (d < winLength) {\r\n\t\t\tfor (let j = d; j <= winLength; j++) {\r\n\t\t\t\tlet nx2 = x + (i + j) * dx;\r\n\t\t\t\tlet ny2 = y + (i + j) * dy;\r\n\t\t\t\tif (getValue(gameState, nx2, ny2) !== v && getValue(gameState, nx2, ny2) !== 0) {\r\n\t\t\t\t\td = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (d > l) {\r\n\t\t\tl = d;\r\n\t\t}\r\n\t\ti--;\r\n\t}\r\n\treturn l;\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class Elk extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > 0 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class ElkAtt extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > -1 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class ElkDef extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\treturn (highAtt - highDef) > 1 ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { AI } from \"../AI\";\r\nimport { GameState, getValue } from \"../GameState\";\r\nimport { countLine } from \"./utils\";\r\n\r\nexport class Fuzzy extends AI {\r\n\tdoTurn(gameState: GameState) {\r\n\t\tconst { placements } = gameState;\r\n\t\tlet highAtt = 0;\r\n\t\tlet highDef = 0;\r\n\t\tlet heatMap: { x: number; y: number; att: number; def: number; }[] = [];\r\n\t\tplacements.forEach(e => {\r\n\t\t\tfor (let x = -1; x <= 1; x++) {\r\n\t\t\t\tfor (let y = -1; y <= 1; y++) {\r\n\t\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getValue(gameState, e.x + x, e.y + y) !== 0) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\theatMap.forEach(h => {\r\n\t\t\t\t\t\tif (h.x === e.x + x && h.y === e.y + y) {\r\n\t\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (flag) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet o = {\r\n\t\t\t\t\t\tx: e.x + x,\r\n\t\t\t\t\t\ty: e.y + y,\r\n\t\t\t\t\t\tatt: Math.max(\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, this.icon, 1, -1, getValue, this.winLength)),\r\n\t\t\t\t\t\tdef: Math.max(...Array(this.pCount).fill(0).map((_, i) => {\r\n\t\t\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, 0, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, -1, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 0, -1, getValue, this.winLength),\r\n\t\t\t\t\t\t\t\tcountLine(gameState, e.x + x, e.y + y, i + 1, 1, -1, getValue, this.winLength))\r\n\t\t\t\t\t\t}).filter((_, i) => i !== this.icon - 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (o.att > highAtt) {\r\n\t\t\t\t\t\thighAtt = o.att;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o.def > highDef) {\r\n\t\t\t\t\t\thighDef = o.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theatMap.push(o);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (heatMap.length === 0) {\r\n\t\t\treturn { x: 0, y: 0 };\r\n\t\t} else {\r\n\t\t\tlet maxDef = 0;\r\n\t\t\tlet maxAtt = 0;\r\n\t\t\tlet attMap = heatMap.filter(e => e.att === highAtt);\r\n\t\t\tattMap.forEach(e => {\r\n\t\t\t\tif (e.def > maxDef) {\r\n\t\t\t\t\tmaxDef = e.def;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattMap = attMap.filter(e => e.def === maxDef);\r\n\t\t\tlet defMap = heatMap.filter(e => e.def === highDef);\r\n\t\t\tdefMap.forEach(e => {\r\n\t\t\t\tif (e.att > maxAtt) {\r\n\t\t\t\t\tmaxAtt = e.att;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdefMap = defMap.filter(e => e.att === maxAtt);\r\n\t\t\tif (highAtt >= this.winLength) {\r\n\t\t\t\treturn attMap[Math.floor(Math.random() * attMap.length)];\r\n\t\t\t}\r\n\t\t\tif (highDef >= this.winLength) {\r\n\t\t\t\treturn defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t\t}\r\n\t\t\treturn highAtt >= highDef ? attMap[Math.floor(Math.random() * attMap.length)] : defMap[Math.floor(Math.random() * defMap.length)];\r\n\t\t}\r\n\t}\r\n}","import { Board } from './Board';\nimport { addChunk, GameState } from './GameState';\nimport { AI } from './AI';\nimport { Elk } from './ais/Elk';\nimport { ElkAtt } from './ais/ElkAtt';\nimport { ElkDef } from './ais/ElkDef';\nimport { Fuzzy } from './ais/Fuzzy';\nimport React from 'react';\nimport { GameProps } from './GameProps';\n\n// const params = new URLSearchParams(window.location.search);\n\nfunction doLocalTurn(gameState: GameState, boardRef: any, turnDelay: number) {\n\tif (gameState.AIs[gameState.turn] !== undefined) {\n\t\tconst { x, y } = (gameState.AIs[gameState.turn] as AI).doTurn(gameState);\n\t\tsetTimeout(\n\t\t\t() => boardRef.current?.dispatchEvent(\n\t\t\t\tnew CustomEvent('selectSquare',\n\t\t\t\t\t{ detail: { x: x, y: y } })),\n\t\t\tturnDelay);\n\t}\n}\n\nclass App extends React.Component<GameProps, GameState> {\n\tconstructor(props: GameProps) {\n\t\tsuper(props);\n\n\t\tconst { winLength, limit, AINames, delay } = props;\n\n\t\tlet AIs: (AI | undefined)[] = [];\n\t\tfor (let i = 0; i < AINames.length; i++) {\n\t\t\tswitch (AINames[i]) {\n\t\t\t\tcase \"fuzzy\":\n\t\t\t\t\tAIs.push(new Fuzzy(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elk\":\n\t\t\t\t\tAIs.push(new Elk(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elkatt\":\n\t\t\t\t\tAIs.push(new ElkAtt(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"elkdef\":\n\t\t\t\t\tAIs.push(new ElkDef(winLength, i + 1, AINames.length));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tAIs.push(undefined);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.state = {\n\t\t\tturn: 0,\n\t\t\tplacements: [],\n\t\t\tmap: {},\n\t\t\tplayerCount: AINames.length,\n\t\t\tmoveLimit: (limit > 0 ? limit : 0),\n\t\t\twinLength: winLength,\n\t\t\tisLimited: limit > 0,\n\t\t\tdelay,\n\t\t\tAIs\n\t\t};\n\n\t\tfor (let i = -1; i <= 1; i++) {\n\t\t\tfor (let j = -1; j <= 1; j++) {\n\t\t\t\tthis.state = { ...this.state, ...addChunk(this.state, i, j) };\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { iconConfig } = this.props;\n\t\tconst { AIs } = this.state;\n\n\t\treturn (<Board\n\t\t\ticonConfig={iconConfig}\n\t\t\tgameState={this.state}\n\t\t\tbroadcast={(gs: GameState, callback: (gs: GameState) => void) => {\n\t\t\t\tthis.setState(gs);\n\t\t\t\tcallback(gs);\n\t\t\t}}\n\t\t\tdoLocalTurn={doLocalTurn}\n\t\t\tcanMove={AIs[this.state.turn] === undefined}\n\t\t/>);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport reportWebVitals from './reportWebVitals';\nimport ThemeSelector from './ThemeSelector';\nimport { CircleIcon } from './assets/CircleIcon';\nimport { CrossIcon } from './assets/CrossIcon';\nimport { DiamondIcon } from './assets/DiamondIcon';\nimport { SquareIcon } from './assets/SquareIcon';\nimport { Menu } from './Menu';\nimport App from './App';\n\nconst params = new URLSearchParams(window.location.search);\n\nconst openGame = params.get('game');\n\nlet winLength = params.get('win') ? parseInt(params.get('win') as string, 10) : 5;\nlet playerCount = params.get('count') ? parseInt(params.get('count') as string, 10) : 2;\nlet limit = params.get('limit') ? parseInt(params.get('limit') as string, 10) : 0;\nlet delay = params.get('delay') ? parseInt(params.get('delay') as string, 10) : 0;\nlet AINames = []\nfor (let i = 0; i < playerCount; i++) {\n\tAINames.push(params.get(`p${i + 1}`) || 'player');\n}\n\nlet iconConfig = {\n\tplayerColors: [\n\t\t'#5588ff',\n\t\t'#ff3344',\n\t\t\"#33ff44\",\n\t\t'#ffcc33'\n\t],\n\tplayerIcons: [\n\t\tCircleIcon,\n\t\tCrossIcon,\n\t\tDiamondIcon,\n\t\tSquareIcon\n\t]\n};\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeSelector theme={params.get('theme') || 'default'}>\n\t\t\t{openGame ? <App\n\t\t\t\twinLength={winLength}\n\t\t\t\tlimit={limit}\n\t\t\t\tdelay={delay}\n\t\t\t\tAINames={AINames}\n\t\t\t\ticonConfig={iconConfig}\n\t\t\t/> : <Menu\n\t\t\t\twinLength={winLength}\n\t\t\t\tlimit={limit}\n\t\t\t\tdelay={delay}\n\t\t\t\tAINames={AINames}\n\t\t\t\ticonConfig={iconConfig}\n\t\t\t/>}\n\t\t</ThemeSelector>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const CircleIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M500,0C223.86,0,0,223.86,0,500s223.86,500,500,500,500-223.86,500-500S776.14,0,500,0Zm0,800c-165.69,0-300-134.31-300-300S334.31,200,500,200,800,334.31,800,500,665.69,800,500,800Z\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const CrossIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<polygon fill={props.color} points=\"1000 858.58 641.42 500 1000 141.42 858.58 0 500 358.58 141.42 0 0 141.42 358.58 500 0 858.58 141.42 1000 500 641.42 858.58 1000 1000 858.58\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const DiamondIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M500,0,0,500l500,500,500-500Zm0,717.16L282.84,500,500,282.84,717.16,500Z\" transform=\"translate(0 0)\" />\r\n\t\t</svg>\r\n\t);\r\n}","export const SquareIcon = (props: { color: string }) => {\r\n\treturn (\r\n\t\t<svg className=\"player-icon\" id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\">\r\n\t\t\t<path fill={props.color} d=\"M0,0V1000H1000V0ZM800,800H200V200H800Z\" />\r\n\t\t</svg>\r\n\t);\r\n}"],"sourceRoot":""}